import{e as k}from"./chunk-SQ4AFRWT.js";import{F as G,G as j,K as L,Y as F,ca as q,d as w,f as _,g as z,h as E,i as M,k as T,n as b,y as O,z as A}from"./chunk-QUCUL4SD.js";import{Ca as C,F as g,Fb as S,J as d,K as c,M as p,Na as P,Q as u,T as h,V as e,W as i,X as f,aa as x,ba as v,ja as n,la as I,za as y}from"./chunk-ZFR4GTBG.js";import"./chunk-AW5PRJD7.js";import"./chunk-T47TWMLD.js";import"./chunk-X2LLLM27.js";import"./chunk-GDTBDVVA.js";import"./chunk-EYVCEYVV.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-O4PCMGUI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{i as l}from"./chunk-OYAVQN5W.js";function N(a,o){if(a&1&&(e(0,"div",7),n(1),i()),a&2){let D=v();d(),I(" ",D.error," ")}}var V=(()=>{let o=class o{constructor(t,r,s,m,H){this.authService=t,this.router=r,this.platform=s,this.zone=m,this.toastController=H,this.error=null,L({logoGoogle:F,personCircleOutline:q})}ngOnInit(){return l(this,null,function*(){try{this.platform.ready().then(()=>l(this,null,function*(){yield this.initializeAuth()}))}catch(t){console.error("Login initialization failed:",t),this.error="Failed to initialize login. Please try again later."}})}initializeAuth(){return l(this,null,function*(){(yield this.authService.initGoogleAuth())||(this.error="Failed to initialize authentication. Please check your internet connection and try again.")})}handleGoogleSignIn(){return l(this,null,function*(){try{if(this.error=null,yield this.zone.run(()=>this.authService.login()))yield this.router.navigate(["/tabs"]);else throw new Error("Authentication failed")}catch(t){console.error("Login error:",t),this.error="Authentication failed. Please ensure you grant all required permissions.",yield this.showErrorToast("Authentication failed. Please try again.")}})}showErrorToast(t){return l(this,null,function*(){yield(yield this.toastController.create({message:t,duration:3e3,color:"danger",position:"bottom"})).present()})}};o.\u0275fac=function(r){return new(r||o)(c(k),c(P),c(S),c(g),c(G))},o.\u0275cmp=p({type:o,selectors:[["app-login"]],decls:24,vars:1,consts:[[1,"ion-padding"],[1,"login-container"],[1,"intro-text"],["expand","block",3,"click"],["slot","start","name","logo-google"],[1,"scope-info"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(r,s){r&1&&(e(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n(3,"Login"),i()()(),e(4,"ion-content",0)(5,"ion-card")(6,"ion-card-header")(7,"ion-card-title"),n(8,"Welcome to PlayMate"),i()(),e(9,"ion-card-content")(10,"div",1)(11,"div",2),n(12,"Please sign in with your Google account to continue"),i(),e(13,"ion-button",3),x("click",function(){return s.handleGoogleSignIn()}),f(14,"ion-icon",4),n(15," Sign in with Google "),i(),e(16,"div",5),n(17," This app requires access to: "),e(18,"ul")(19,"li"),n(20,"Google Sheets"),i(),e(21,"li"),n(22,"Your email address"),i()()(),u(23,N,2,1,"div",6),i()()()()),r&2&&(d(23),h("ngIf",s.error))},dependencies:[C,y,T,b,A,O,w,_,E,M,z,j],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center}.scope-info[_ngcontent-%COMP%]{margin-top:20px;color:var(--ion-color-medium);font-size:.9em;text-align:left}.scope-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0;padding-left:20px}.intro-text[_ngcontent-%COMP%]{color:var(--ion-color-dark);margin-bottom:20px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin-top:16px;font-size:14px}ion-button[_ngcontent-%COMP%]{margin:20px 0;width:250px}"]});let a=o;return a})();export{V as LoginPage};
