import{a as ie}from"./chunk-57ETTLVZ.js";import{a as re}from"./chunk-NIB3TDYB.js";import{a as ne}from"./chunk-MYIHYH53.js";import"./chunk-J5NWP6QB.js";import"./chunk-T47TWMLD.js";import"./chunk-BK4AT5KR.js";import"./chunk-35HGTZOU.js";import{$ as s,Bc as K,Ca as x,Da as F,Ea as C,Ec as Q,Ga as D,H as P,I as O,Ic as X,Jb as z,La as I,Ma as M,Na as w,Oa as N,Pb as $,Qb as G,R as a,Ra as A,Rb as Y,S as b,Sa as j,Ta as E,U as S,Vc as ee,Wb as J,Xc as te,Z as p,Zb as L,aa as k,ab as B,ac as R,ca as o,da as r,dc as U,ea as f,ec as V,ia as T,ic as H,jc as W,ka as y,la as u,qc as Z,rc as q,ua as c,va as h,wa as g,xa as _}from"./chunk-TS5MQKIE.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-OYAVQN5W.js";var ce=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],se=(t,l,e,n)=>({"event-day":t,empty:l,today:e,"payment-day":n});function de(t,l){if(t&1&&(o(0,"div",12),c(1),r()),t&2){let e=l.$implicit;a(),g(" ",e," ")}}function pe(t,l){if(t&1&&(o(0,"span"),c(1),r()),t&2){let e=u().$implicit;a(),h(e.getDate())}}function ge(t,l){if(t&1&&(o(0,"div",15),p(1,pe,2,1,"span",16),r()),t&2){let e=l.$implicit,n=u(2);s("ngClass",F(2,se,n.isEventDay(e),!e,n.isToday(e),n.isPaymentDay(e))),a(),s("ngIf",e)}}function ue(t,l){if(t&1&&(o(0,"div",13),p(1,ge,2,7,"div",14),r()),t&2){let e=l.$implicit;a(),s("ngForOf",e)}}X({chevronBackOutline:ee,chevronForwardOutline:te});var ae=(()=>{let l=class l{constructor(){this.events=[],this.paymentEvents=[],this.month=new Date().getMonth(),this.year=new Date().getFullYear(),this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"]}get weeks(){let n=new Date(this.year,this.month,1),i=new Date(this.year,this.month+1,0),m=[],d=Array(n.getDay()).fill(null);for(let v=1;v<=i.getDate();v++)d.push(new Date(this.year,this.month,v)),d.length===7&&(m.push(d),d=[]);if(d.length){for(;d.length<7;)d.push(null);m.push(d)}return m}get totalDaysInMonth(){return new Date(this.year,this.month+1,0).getDate()}get presentDays(){return this.events.filter(n=>{let i=new Date(n);return i.getFullYear()===this.year&&i.getMonth()===this.month}).length}isEventDay(n){if(!n)return!1;let i=n.toISOString().slice(0,10);return this.events.includes(i)}isPaymentDay(n){if(!n)return!1;let i=n.toISOString().slice(0,10);return this.paymentEvents.includes(i)}isToday(n){if(!n)return!1;let i=new Date;return n.getDate()===i.getDate()&&n.getMonth()===i.getMonth()&&n.getFullYear()===i.getFullYear()}prevMonth(){this.month===0?(this.month=11,this.year--):this.month--}nextMonth(){this.month===11?(this.month=0,this.year++):this.month++}};l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=S({type:l,selectors:[["app-calendar-grid"]],inputs:{events:"events",paymentEvents:"paymentEvents",month:"month",year:"year"},decls:14,vars:7,consts:[[1,"calendar-grid"],[1,"calendar-title",2,"display","flex","align-items","center","justify-content","center","gap","0.5rem","margin-bottom","0.5rem"],["aria-label","Previous month",1,"calendar-nav-btn",3,"click"],["name","chevron-back-outline",2,"font-size","1.25rem"],[2,"flex","1","text-align","center","font-weight","bold"],["aria-label","Next month",1,"calendar-nav-btn",3,"click"],["name","chevron-forward-outline",2,"font-size","1.25rem"],[1,"calendar-summary",2,"text-align","center","margin-bottom","0.5rem","color","var(--ion-color-primary)","font-weight","500"],[1,"calendar-header"],["class","calendar-cell calendar-header-cell",4,"ngFor","ngForOf"],[1,"calendar-body"],["class","calendar-row",4,"ngFor","ngForOf"],[1,"calendar-cell","calendar-header-cell"],[1,"calendar-row"],["class","calendar-cell",3,"ngClass",4,"ngFor","ngForOf"],[1,"calendar-cell",3,"ngClass"],[4,"ngIf"]],template:function(i,m){i&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),y("click",function(){return m.prevMonth()}),f(3,"ion-icon",3),r(),o(4,"span",4),c(5),r(),o(6,"button",5),y("click",function(){return m.nextMonth()}),f(7,"ion-icon",6),r()(),o(8,"div",7),c(9),r(),o(10,"div",8),p(11,de,2,1,"div",9),r(),o(12,"div",10),p(13,ue,2,1,"div",11),r()()),i&2&&(a(5),_("",m.monthNames[m.month]," ",m.year,""),a(4),_(" Total Present: ",m.presentDays," / ",m.totalDaysInMonth," days "),a(2),s("ngForOf",x(6,ce)),a(2),s("ngForOf",m.weeks))},dependencies:[E,I,M,w,K],styles:[".calendar-grid[_ngcontent-%COMP%]{width:100%;max-width:350px;margin:0 auto 1.5rem;background:var(--ion-card-background);border-radius:16px;box-shadow:0 2px 8px rgba(var(--ion-color-primary-rgb),.08),0 1.5px 4px rgba(var(--ion-color-primary-rgb),.06);padding:1rem .5rem 1.5rem;color:var(--ion-card-color)}.calendar-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:500;color:var(--ion-text-color);letter-spacing:.01em;margin-bottom:.5rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.calendar-nav-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--ion-color-primary);font-size:1.5rem;cursor:pointer;padding:0 .5rem;border-radius:50%;transition:background .2s;height:32px;width:32px;display:flex;align-items:center;justify-content:center}.calendar-nav-btn[_ngcontent-%COMP%]:hover, .calendar-nav-btn[_ngcontent-%COMP%]:focus{background:var(--ion-color-primary-tint);outline:none}.calendar-header[_ngcontent-%COMP%], .calendar-row[_ngcontent-%COMP%]{display:flex}.calendar-cell[_ngcontent-%COMP%]{flex:1 1 0;height:40px;display:flex;align-items:center;justify-content:center;font-size:1em;background:var(--ion-card-background);color:var(--ion-card-color);margin:2px;border-radius:50%;transition:background .2s,color .2s,box-shadow .2s;position:relative}.calendar-header-cell[_ngcontent-%COMP%]{font-weight:600;background:var(--ion-segment-background);color:var(--ion-segment-color);border-radius:0;border-bottom:1px solid var(--ion-item-border-color);margin:0}.event-day[_ngcontent-%COMP%]{background:var(--ion-card-background);color:var(--ion-color-primary)}.event-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;line-height:32px;border-radius:50%;background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);font-weight:600;box-shadow:0 2px 6px rgba(var(--ion-color-primary-rgb),.08);margin:auto}.empty[_ngcontent-%COMP%]{background:transparent;border:none;box-shadow:none}.calendar-cell[_ngcontent-%COMP%]:not(.empty):hover{background:var(--ion-color-primary-tint);color:var(--ion-color-primary);cursor:pointer}.today[_ngcontent-%COMP%]{border:none;background:transparent;color:var(--ion-color-primary);font-weight:700}.today[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;line-height:32px;border-radius:50%;border:2px solid var(--ion-color-primary);background:var(--ion-color-light);color:var(--ion-color-primary);font-weight:700;box-sizing:border-box}.today.event-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--ion-color-primary-shade);border:2px solid var(--ion-color-light);color:var(--ion-color-primary-contrast)}.payment-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;line-height:32px;border-radius:50%;background:#2dd36f!important;color:#fff!important;font-weight:700;box-shadow:0 2px 6px #2dd36f1f;margin:auto;border:2px solid #2dd36f}.payment-day.today[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:2px solid #fff;background:#20ba5a!important}"]});let t=l;return t})();var fe=()=>({background:"#2dd36f",color:"#fff","border-radius":"8px",padding:"2px 10px","font-weight":"bold"}),he=()=>({});function ve(t,l){if(t&1&&(o(0,"div")(1,"h3",14),c(2,"Attendance"),r(),f(3,"app-calendar-grid",15),r()),t&2){let e=u(2);a(3),s("events",e.attendanceDates)("paymentEvents",e.paymentDates)}}function be(t,l){if(t&1&&(o(0,"div",23),c(1),r()),t&2){let e=u().$implicit;a(),h(e.notes)}}function ye(t,l){if(t&1&&(o(0,"ion-item")(1,"ion-label")(2,"div",18),c(3),C(4,"number"),o(5,"span",19),c(6),r()(),o(7,"div",20),c(8),C(9,"date"),r(),p(10,be,2,1,"div",21),r(),o(11,"ion-note",22),c(12),r()()),t&2){let e=l.$implicit;a(3),g("\u20B9",D(4,7,e.amount,"1.0-0")," "),a(3),h(e.paymentType),a(2),h(D(9,10,e.date,"mediumDate")),a(2),s("ngIf",e.notes),a(),s("color",e.status==="Paid"?"success":"warning")("ngStyle",e.status==="Paid"?x(13,fe):x(14,he)),a(),g(" ",e.status," ")}}function _e(t,l){if(t&1&&(o(0,"ion-list"),p(1,ye,13,15,"ion-item",17),r()),t&2){let e=u(3);a(),s("ngForOf",e.payments)}}function xe(t,l){t&1&&(o(0,"div",24)(1,"ion-note",25),c(2,"No payments found for this member."),r()())}function Ce(t,l){if(t&1&&(o(0,"div")(1,"h3",14),c(2,"Payments"),r(),p(3,_e,2,1,"ion-list",3)(4,xe,3,0,"div",16),r()),t&2){let e=u(2);a(3),s("ngIf",e.payments.length>0),a(),s("ngIf",e.payments.length===0)}}function De(t,l){if(t&1){let e=T();o(0,"ion-content")(1,"ion-card",4)(2,"ion-card-content",5)(3,"div",6)(4,"div",7),c(5),r(),o(6,"div",8)(7,"div",9)(8,"strong"),c(9),r(),o(10,"small",10),c(11),r()(),o(12,"div"),c(13),r(),o(14,"div"),c(15),r(),o(16,"div"),c(17),C(18,"date"),r(),o(19,"div"),c(20),C(21,"date"),r()()()()(),o(22,"ion-segment",11),y("ionChange",function(i){P(e);let m=u();return O(m.onTabChange(i))}),o(23,"ion-segment-button",12)(24,"ion-label"),c(25,"Attendance"),r()(),o(26,"ion-segment-button",13)(27,"ion-label"),c(28,"Payments"),r()()(),p(29,ve,4,2,"div",3)(30,Ce,5,2,"div",3),r()}if(t&2){let e=u();a(),s("ngClass",e.member.status?e.member.status.toLowerCase():""),a(3),k("background",e.getAvatarColor(e.member.firstName?e.member.firstName.charAt(0):"?")),a(),g(" ",e.member.firstName?e.member.firstName.charAt(0).toUpperCase():"?"," "),a(4),_("",e.member.firstName," ",e.member.lastName,""),a(2),g("ID: ",e.member.id,""),a(2),g("Phone: ",e.member.phone||"N/A",""),a(2),g("Status: ",e.member.status||"N/A",""),a(2),g("Joined: ",e.member.joinDate?D(18,13,e.member.joinDate,"mediumDate"):"N/A",""),a(3),g("Expiry: ",e.member.expiryDate?D(21,16,e.member.expiryDate,"mediumDate"):"N/A",""),a(9),s("ngIf",e.selectedTab==="attendance"),a(),s("ngIf",e.selectedTab==="payments")}}function Se(t,l){t&1&&(o(0,"ion-content")(1,"ion-card")(2,"ion-card-content")(3,"div",26),c(4,"Member not found."),r()()()())}var oe=(()=>{let l=class l{constructor(n,i,m,d){this.route=n,this.memberService=i,this.attendanceService=m,this.paymentService=d,this.member=null,this.currentMonth=new Date().getMonth(),this.currentYear=new Date().getFullYear(),this.attendanceDates=[],this.selectedTab="attendance",this.payments=[],this.paymentDates=[]}ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&(this.memberService.getMembers().subscribe(i=>{this.member=i.members.find(m=>String(m.id)===String(n))||null}),this.attendanceService.getAttendanceByMember(n).subscribe(i=>{this.attendanceDates=i.map(m=>new Date(m.date).toISOString().slice(0,10))}),this.paymentSub=this.paymentService.getPaymentsByMember(n).subscribe(i=>{this.payments=i.sort((m,d)=>new Date(d.date).getTime()-new Date(m.date).getTime()),this.paymentDates=i.map(m=>new Date(m.date).toISOString().slice(0,10))}))}ngOnDestroy(){this.paymentSub&&this.paymentSub.unsubscribe()}onTabChange(n){this.selectedTab=n.detail.value}getAvatarColor(n){if(!n||!/^[A-Za-z]$/.test(n))return"#888";let i=n.toUpperCase().charCodeAt(0)-65;return i<0||i>25?"#888":`hsl(${i*(360/26)%360}, 50%, 60%)`}};l.\u0275fac=function(i){return new(i||l)(b(B),b(ne),b(ie),b(re))},l.\u0275cmp=S({type:l,selectors:[["app-member-detail"]],decls:8,vars:2,consts:[["color","primary"],["slot","start"],["defaultHref","/tabs/members"],[4,"ngIf"],[1,"member-detail-card",3,"ngClass"],[1,"card-content"],[1,"member-info-row",2,"display","flex","align-items","center"],[1,"member-avatar",2,"width","48px","height","48px","border-radius","50%","color","#fff","display","flex","align-items","center","justify-content","center","font-size","1.5em","font-weight","bold","margin-right","16px"],[1,"member-info",2,"flex","1"],[1,"member-name"],[1,"member-id"],["value","attendance",2,"margin","1.5rem 0 1rem 0",3,"ionChange"],["value","attendance"],["value","payments"],[2,"margin-bottom","0.5rem"],[3,"events","paymentEvents"],["class","ion-text-center ion-padding",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"font-weight","600"],[2,"font-size","0.9em","color","var(--ion-color-medium)"],[2,"font-size","0.95em","color","var(--ion-color-medium)"],["style","font-size:0.9em; color:var(--ion-color-tertiary);",4,"ngIf"],["slot","end",3,"color","ngStyle"],[2,"font-size","0.9em","color","var(--ion-color-tertiary)"],[1,"ion-text-center","ion-padding"],["color","medium"],[1,"ion-text-danger"]],template:function(i,m){i&1&&(o(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),f(3,"ion-back-button",2),r(),o(4,"ion-title"),c(5,"Member Details"),r()()(),p(6,De,31,19,"ion-content",3)(7,Se,5,0,"ion-content",3)),i&2&&(a(6),s("ngIf",m.member),a(),s("ngIf",!m.member))},dependencies:[E,I,M,w,N,j,A,L,q,$,z,Z,J,G,Y,Q,W,U,V,R,H,ae],encapsulation:2});let t=l;return t})();var $e=[{path:"",component:oe}];export{$e as MEMBER_DETAIL_ROUTES};
