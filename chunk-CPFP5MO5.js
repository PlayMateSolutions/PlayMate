import{e as G,f as D}from"./chunk-IEVPBU5H.js";import"./chunk-T47TWMLD.js";import{E as q,a as L,y as F}from"./chunk-KQP4CTSV.js";import{$ as e,Ja as b,Jb as I,Lb as M,M as p,Mb as w,Nb as O,Oa as P,Pb as S,Q as d,R as a,Rb as z,T as u,Ub as E,X as h,Z as x,Za as _,aa as n,ba as g,ha as f,ia as C,kc as k,lc as T,nb as y,ra as o,ta as v,tc as j,vc as A}from"./chunk-FQHFODV6.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{i as l}from"./chunk-OYAVQN5W.js";function B(c,i){if(c&1&&(e(0,"div",9),o(1),n()),c&2){let H=C();d(),v(" ",H.error," ")}}var tt=(()=>{let i=class i{constructor(t,r,s,m,N,Y){this.authService=t,this.router=r,this.platform=s,this.zone=m,this.toastController=N,this.clubContext=Y,this.error=null,L({logoGoogle:F,personCircleOutline:q})}ngOnInit(){return l(this,null,function*(){try{this.platform.ready().then(()=>l(this,null,function*(){yield this.initializeAuth()}))}catch(t){console.error("Login initialization failed:",t),this.error="Failed to initialize login. Please try again later."}})}initializeAuth(){return l(this,null,function*(){(yield this.authService.initGoogleAuth())||(this.error="Failed to initialize authentication. Please check your internet connection and try again.")})}handleGoogleSignIn(){return l(this,null,function*(){try{if(this.error=null,yield this.zone.run(()=>this.authService.login()))this.clubContext.getSportsClubId()?yield this.router.navigate(["/tabs"]):yield this.router.navigate(["/settings"]);else throw new Error("Authentication failed")}catch(t){console.error("Login error:",t),this.error="Authentication failed. Please ensure you grant all required permissions.",yield this.showErrorToast("Authentication failed. Please try again.")}})}showErrorToast(t){return l(this,null,function*(){yield(yield this.toastController.create({message:t,duration:3e3,color:"danger",position:"bottom"})).present()})}};i.\u0275fac=function(r){return new(r||i)(a(G),a(_),a(y),a(p),a(j),a(D))},i.\u0275cmp=u({type:i,selectors:[["app-login"]],decls:26,vars:1,consts:[[1,"ion-padding"],[1,"app-logo"],["src","assets/icon/play-mate-icon-flat.png","alt","PlayMate Logo",1,"logo-image"],[1,"login-container"],[1,"intro-text"],["expand","block",3,"click"],["slot","start","name","logo-google"],[1,"scope-info"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(r,s){r&1&&(e(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o(3,"Login"),n()()(),e(4,"ion-content",0)(5,"ion-card")(6,"ion-card-header")(7,"div",1),g(8,"img",2),n(),e(9,"ion-card-title"),o(10,"Welcome to PlayMate"),n()(),e(11,"ion-card-content")(12,"div",3)(13,"div",4),o(14,"Please sign in with your Google account to continue"),n(),e(15,"ion-button",5),f("click",function(){return s.handleGoogleSignIn()}),g(16,"ion-icon",6),o(17," Sign in with Google "),n(),e(18,"div",7),o(19," This app requires access to: "),e(20,"ul")(21,"li"),o(22,"Google Sheets"),n(),e(23,"li"),o(24,"Your email address"),n()()(),h(25,B,2,1,"div",8),n()()()()),r&2&&(d(25),x("ngIf",s.error))},dependencies:[P,b,z,E,T,k,I,M,O,S,w,A],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color)}ion-card[_ngcontent-%COMP%]{margin:20px;border-radius:16px;box-shadow:0 8px 24px #0000001a;--background: var(--ion-card-background, var(--ion-background-color))}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding-top:0}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center}.app-logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.logo-image[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:16px;box-shadow:0 4px 12px #dc262633;transition:transform .3s ease}.logo-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}ion-card-title[_ngcontent-%COMP%]{text-align:center;color:var(--ion-color-primary);font-weight:600;font-size:1.4em}.scope-info[_ngcontent-%COMP%]{margin-top:20px;color:var(--ion-text-color-step-600, var(--ion-color-medium));font-size:.9em;text-align:left}.scope-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0;padding-left:20px}.intro-text[_ngcontent-%COMP%]{color:var(--ion-text-color, var(--ion-color-dark));margin-bottom:20px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin-top:16px;font-size:14px}ion-button[_ngcontent-%COMP%]{margin:20px 0;width:250px;--border-radius: 8px;--box-shadow: 0 4px 12px rgba(0, 0, 0, .1);font-weight:500}ion-button[_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 16px rgba(0, 0, 0, .15);transform:translateY(-2px)}ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}"]});let c=i;return c})();export{tt as LoginPage};
