import{e as L,f as D}from"./chunk-OSLX4QTD.js";import"./chunk-T47TWMLD.js";import{$ as x,Bc as G,Ic as F,N as h,Na as I,Ob as M,Qb as _,R as d,Rb as O,S as c,Sb as S,Ta as y,U as u,Ub as z,Wb as k,Z as f,Zb as E,ca as o,cb as P,da as i,ea as g,gd as R,ka as v,la as C,md as q,qc as j,rc as A,sb as w,ua as a,wa as b,y as m,zc as T}from"./chunk-AAX3YNDZ.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{i as l}from"./chunk-OYAVQN5W.js";var H=(()=>{let t=class t{constructor(){this.refreshAll=null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function K(n,t){if(n&1&&(o(0,"div",9),a(1),i()),n&2){let N=C();d(),b(" ",N.error," ")}}var it=(()=>{let t=class t{constructor(e,r,s,p,Y,B,W){this.authService=e,this.router=r,this.platform=s,this.zone=p,this.toastController=Y,this.clubContext=B,this.appRefresher=W,this.error=null,F({logoGoogle:R,personCircleOutline:q})}ngOnInit(){return l(this,null,function*(){console.log("Login component initialized");try{this.platform.ready().then(()=>l(this,null,function*(){yield this.initializeAuth()}))}catch(e){console.error("Login initialization failed:",e),this.error="Failed to initialize login. Please try again later."}})}initializeAuth(){return l(this,null,function*(){console.log("Initializing authentication..."),(yield this.authService.initGoogleAuth())||(this.error="Failed to initialize authentication. Please check your internet connection and try again.")})}handleGoogleSignIn(){return l(this,null,function*(){try{if(this.error=null,yield this.zone.run(()=>this.authService.login()))this.clubContext.getSportsClubId()?(this.appRefresher.refreshAll&&(yield this.appRefresher.refreshAll()),yield this.router.navigate(["/tabs"])):yield this.router.navigate(["/settings"]);else throw new Error("Authentication failed")}catch(e){console.error("Login error:",e),this.error="Authentication failed. Please ensure you grant all required permissions.",yield this.showErrorToast("Authentication failed. Please try again.")}})}showErrorToast(e){return l(this,null,function*(){yield(yield this.toastController.create({message:e,duration:3e3,color:"danger",position:"bottom"})).present()})}};t.\u0275fac=function(r){return new(r||t)(c(L),c(P),c(w),c(h),c(T),c(D),c(H))},t.\u0275cmp=u({type:t,selectors:[["app-login"]],decls:26,vars:1,consts:[[1,"ion-padding"],[1,"app-logo"],["src","assets/icon/play-mate-icon-flat.png","alt","GymMate Logo",1,"logo-image"],[1,"login-container"],[1,"intro-text"],["expand","block",3,"click"],["slot","start","name","logo-google"],[1,"scope-info"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(r,s){r&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),a(3,"Login"),i()()(),o(4,"ion-content",0)(5,"ion-card")(6,"ion-card-header")(7,"div",1),g(8,"img",2),i(),o(9,"ion-card-title"),a(10,"Welcome to GymMate"),i()(),o(11,"ion-card-content")(12,"div",3)(13,"div",4),a(14,"Please sign in with your Google account to continue"),i(),o(15,"ion-button",5),v("click",function(){return s.handleGoogleSignIn()}),g(16,"ion-icon",6),a(17," Sign in with Google "),i(),o(18,"div",7),a(19," This app requires access to: "),o(20,"ul")(21,"li"),a(22,"Google Sheets"),i(),o(23,"li"),a(24,"Your email address"),i()()(),f(25,K,2,1,"div",8),i()()()()),r&2&&(d(25),x("ngIf",s.error))},dependencies:[y,I,k,E,A,j,M,_,S,z,O,G],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color)}ion-card[_ngcontent-%COMP%]{margin:20px;border-radius:16px;box-shadow:0 8px 24px #0000001a;--background: var(--ion-card-background, var(--ion-background-color))}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding-top:0}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center}.app-logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.logo-image[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:16px;box-shadow:0 4px 12px #dc262633;transition:transform .3s ease}.logo-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}ion-card-title[_ngcontent-%COMP%]{text-align:center;color:var(--ion-color-primary);font-weight:600;font-size:1.4em}.scope-info[_ngcontent-%COMP%]{margin-top:20px;color:var(--ion-text-color-step-600, var(--ion-color-medium));font-size:.9em;text-align:left}.scope-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0;padding-left:20px}.intro-text[_ngcontent-%COMP%]{color:var(--ion-text-color, var(--ion-color-dark));margin-bottom:20px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin-top:16px;font-size:14px}ion-button[_ngcontent-%COMP%]{margin:20px 0;width:250px;--border-radius: 8px;--box-shadow: 0 4px 12px rgba(0, 0, 0, .1);font-weight:500}ion-button[_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 16px rgba(0, 0, 0, .15);transform:translateY(-2px)}ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}"]});let n=t;return n})();export{it as LoginPage};
