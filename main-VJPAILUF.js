import{a as jt,c as Tt}from"./chunk-ZBAZESDS.js";import{a as kt,n as Rt,u as $t}from"./chunk-243UYSSO.js";import{a as At,b as Pt,c as O,d as Et,e as h,f as Dt}from"./chunk-4MBBCWZJ.js";import{$ as M,Aa as A,Bb as It,Ca as P,Ea as rt,Eb as _t,H as tt,Ha as E,Hb as $,I,Ia as st,Ib as Ct,J as c,Ja as at,Ka as lt,Kb as D,L as S,La as ct,Lb as F,M as et,Ma as k,Mb as St,Na as g,Oa as mt,P as b,Pa as pt,Qa as ut,R as _,T as r,U as a,V as u,Vb as bt,Wb as yt,Z as it,Zb as L,_ as d,_b as xt,bc as Mt,cc as wt,e as W,ec as y,g as G,ia as f,ja as N,l as J,n as K,ob as R,pa as ot,qa as w,qb as ft,r as C,ra as j,s as Q,sb as dt,ta as nt,tb as gt,u as l,ub as ht,vb as vt,w as X,y as Y,ya as T,z as Z}from"./chunk-LMPOHHPT.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-T47TWMLD.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{h as H,i as p}from"./chunk-OYAVQN5W.js";var Ft=(()=>{let t=class t{http;prefix;suffix;constructor(o,i="/assets/i18n/",n=".json"){this.http=o,this.prefix=i,this.suffix=n}getTranslation(o){return this.http.get(`${this.prefix}${o}${this.suffix}`)}};H(t,"\u0275fac",function(i){return new(i||t)(l(E),l(String),l(String))}),H(t,"\u0275prov",C({token:t,factory:t.\u0275fac}));let e=t;return e})();var V=(()=>{let t=class t{constructor(o,i){this.authService=o,this.router=i}canActivate(){return this.authService.isAuthenticated$.pipe(K(1),G(o=>o?!0:(this.router.navigate(["/login"]),!1)))}};t.\u0275fac=function(i){return new(i||t)(l(h),l(g))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Lt=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-TVTS6QE2.js").then(e=>e.LoginPage)},{path:"settings",canActivate:[V],loadComponent:()=>import("./chunk-VA7LUVYV.js").then(e=>e.SettingsPage)},{path:"tabs",canActivate:[V],loadChildren:()=>import("./chunk-JWB42R7N.js").then(e=>e.routes)}];var Ot=(()=>{let t=class t{constructor(o,i){this.router=o,this.menu=i}navigate(o){return p(this,null,function*(){yield this.menu.close(),yield this.router.navigate([o])})}};t.\u0275fac=function(i){return new(i||t)(c(g),c(Mt))},t.\u0275cmp=S({type:t,selectors:[["app-menu"]],decls:26,vars:0,consts:[["contentId","main-content"],["color","primary"],["button","","detail","",3,"click"],["slot","start","name","people-outline"],["slot","start","name","cash-outline"],["slot","start","name","calendar-outline"],["slot","start","name","settings-outline"]],template:function(i,n){i&1&&(r(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title"),f(4,"PlayMate"),a()()(),r(5,"ion-content")(6,"ion-list")(7,"ion-item",2),d("click",function(){return n.navigate("/tabs/members")}),u(8,"ion-icon",3),r(9,"ion-label"),f(10,"Members"),a()(),r(11,"ion-item",2),d("click",function(){return n.navigate("/tabs/payments")}),u(12,"ion-icon",4),r(13,"ion-label"),f(14,"Payments"),a()(),r(15,"ion-item",2),d("click",function(){return n.navigate("/tabs/attendance")}),u(16,"ion-icon",5),r(17,"ion-label"),f(18,"Attendance"),a()(),r(19,"ion-item-divider")(20,"ion-label"),f(21,"Admin"),a()(),r(22,"ion-item",2),d("click",function(){return n.navigate("/settings")}),u(23,"ion-icon",6),r(24,"ion-label"),f(25,"Settings"),a()()()()())},dependencies:[St,_t,yt,bt,It,F,$,y,D,Ct],encapsulation:2});let e=t;return e})();var Ht=(()=>{let t=class t{constructor(o,i,n){this.toastController=o,this.router=i,this.authService=n}intercept(o,i){return i.handle(o).pipe(J(n=>{var v,q;let s="An error occurred";return n.error instanceof ErrorEvent?s=`Error: ${n.error.message}`:n.status===401?(this.authService.logout(),this.router.navigate(["/login"]),s="Session expired. Please log in again."):(q=(v=n.error)==null?void 0:v.error)!=null&&q.message?s=n.error.error.message:s=`Error Code: ${n.status}
Message: ${n.message}`,this.presentErrorToast(s),W(()=>n)}))}presentErrorToast(o){return p(this,null,function*(){yield(yield this.toastController.create({message:o,duration:3e3,position:"bottom",color:"danger",buttons:[{text:"Dismiss",role:"cancel"}]})).present()})}};t.\u0275fac=function(i){return new(i||t)(l(wt),l(g),l(h))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})();function Ut(e,t){if(e&1&&(r(0,"ion-item")(1,"ion-label")(2,"h2"),f(3),a(),r(4,"p"),f(5),a()()()),e&2){let m=t.ngIf;I(3),N(m.name),I(2),N(m.email)}}var Nt=(()=>{let t=class t{constructor(o,i){this.authService=o,this.popoverController=i,this.userSession$=this.authService.userSession$}logout(){this.popoverController.dismiss(null,"logout")}};t.\u0275fac=function(i){return new(i||t)(c(h),c(L))},t.\u0275cmp=S({type:t,selectors:[["app-profile-menu"]],decls:7,vars:3,consts:[[4,"ngIf"],["button","",3,"click"],["slot","start","name","log-out-outline"]],template:function(i,n){i&1&&(r(0,"ion-list"),b(1,Ut,6,2,"ion-item",0),w(2,"async"),r(3,"ion-item",1),d("click",function(){return n.logout()}),u(4,"ion-icon",2),r(5,"ion-label"),f(6,"Logout"),a()()()),i&2&&(I(),_("ngIf",j(2,1,n.userSession$)))},dependencies:[P,T,A,F,$,D,y],styles:["ion-list[_ngcontent-%COMP%]{margin:0;padding:0}h2[_ngcontent-%COMP%]{font-weight:500;margin:0}p[_ngcontent-%COMP%]{margin:4px 0 0;color:var(--ion-color-medium)}"]});let e=t;return e})();function qt(e,t){if(e&1&&u(0,"img",8),e&2){let m=M().ngIf;_("src",m.picture,tt)}}function Wt(e,t){e&1&&u(0,"ion-icon",9)}function Gt(e,t){if(e&1){let m=it();r(0,"ion-buttons",3)(1,"ion-button",4),d("click",function(i){Y(m);let n=M(2);return Z(n.showProfileMenu(i))}),r(2,"ion-avatar",5),b(3,qt,1,1,"img",6)(4,Wt,1,0,"ion-icon",7),a()()()}if(e&2){let m=t.ngIf;I(3),_("ngIf",m.picture),I(),_("ngIf",!m.picture)}}function Jt(e,t){if(e&1&&(b(0,Gt,5,2,"ion-buttons",2),w(1,"async")),e&2){let m=M();_("ngIf",j(1,1,m.userSession$))}}var Bt=(()=>{let t=class t{constructor(o,i,n,s,v){this.authService=o,this.router=i,this.popoverController=n,this.route=s,this.clubContext=v,kt({personCircleOutline:$t,logOutOutline:Rt}),this.userSession$=this.authService.userSession$}ngOnInit(){return p(this,null,function*(){try{yield Pt.initialize({google:{webClientId:At.googleSignInClientId}})}catch(o){console.error("Failed to initialize Social Login:",o)}this.authService.isAuthenticated$.subscribe(o=>p(this,null,function*(){if(o){let i=this.router.url;this.route.queryParams.subscribe(n=>p(this,null,function*(){let s=n.sportsClubId;s&&this.clubContext.setSportsClubId(s);let v=this.clubContext.getSportsClubId();!v&&!i.includes("/settings")?yield this.router.navigate(["/settings"]):v&&!i.includes("/tabs")&&!i.includes("/settings")&&(yield this.router.navigate(["/tabs"]))}))}}))})}showProfileMenu(o){return p(this,null,function*(){let i=yield this.popoverController.create({component:Nt,event:o,translucent:!0});yield i.present();let{role:n}=yield i.onWillDismiss();n==="logout"&&(yield this.authService.logout(),yield this.router.navigate(["/login"]))})}};t.\u0275fac=function(i){return new(i||t)(c(h),c(g),c(L),c(ct),c(Dt))},t.\u0275cmp=S({type:t,selectors:[["app-root"]],features:[ot([{provide:k,useClass:R},{provide:st,useClass:Ht,multi:!0}])],decls:5,vars:0,consts:[["userProfile",""],["id","main-content"],["slot","end",4,"ngIf"],["slot","end"],[3,"click"],["slot","icon-only"],[3,"src",4,"ngIf"],["name","person-circle-outline",4,"ngIf"],[3,"src"],["name","person-circle-outline"]],template:function(i,n){i&1&&(r(0,"ion-app"),u(1,"app-menu")(2,"ion-router-outlet",1),a(),b(3,Jt,2,3,"ng-template",null,0,nt))},dependencies:[P,T,A,dt,ft,gt,y,ht,vt,lt,Ot],encapsulation:2});let e=t;return e})();var zt=(()=>{let t=class t{constructor(o){this.storage=o,this.init()}init(){return p(this,null,function*(){yield this.storage.create()})}};t.\u0275fac=function(i){return new(i||t)(l(O))},t.\u0275mod=et({type:t}),t.\u0275inj=Q({providers:[O],imports:[Et.forRoot({name:"playmate_db",driverOrder:["indexeddb","localstorage"]})]});let e=t;return e})();function Kt(e){return new Ft(e,"./assets/i18n/",".json")}rt(Bt,{providers:[{provide:k,useClass:R},xt(),pt(Lt,ut(mt)),at(),X(zt,Tt.forRoot({loader:{provide:jt,useFactory:Kt,deps:[E]},defaultLanguage:"en"}))]});export{Kt as createTranslateLoader};
