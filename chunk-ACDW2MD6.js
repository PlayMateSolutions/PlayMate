var u=(()=>{let a=class a{static onUpgrade(t){if(t.objectStoreNames.contains("members")||t.createObjectStore("members",{keyPath:"id"}),!t.objectStoreNames.contains("payments")){let e=t.createObjectStore("payments",{keyPath:"id"});e.createIndex("memberId","memberId",{unique:!1}),e.createIndex("date","date",{unique:!1}),e.createIndex("paymentType","paymentType",{unique:!1})}if(!t.objectStoreNames.contains("attendance")){let e=t.createObjectStore("attendance",{keyPath:"id"});e.createIndex("memberId","memberId",{unique:!1}),e.createIndex("date","date",{unique:!1}),e.createIndex("membershipStatus","membershipStatus",{unique:!1}),e.createIndex("dateRange",["date","memberId"],{unique:!1})}if(!t.objectStoreNames.contains("expenses")){let e=t.createObjectStore("expenses",{keyPath:"id"});e.createIndex("date","date",{unique:!1}),e.createIndex("category","category",{unique:!1})}}static deleteDatabase(){return new Promise((t,e)=>{let r=window.indexedDB.deleteDatabase(a.dbName);r.onsuccess=()=>t(),r.onerror=s=>e(s),r.onblocked=()=>e(new Error("Delete blocked"))})}static clearAllData(){return new Promise((t,e)=>{let r=window.indexedDB.open(a.dbName,a.version);r.onsuccess=s=>{let n=s.target.result,d=Array.from(n.objectStoreNames),c=n.transaction(d,"readwrite");c.oncomplete=()=>{n.close(),t()},c.onerror=i=>{n.close(),e(i)};for(let i of d)c.objectStore(i).clear()},r.onerror=s=>e(s)})}};a.dbName="PlayMateDB",a.version=5;let o=a;return o})();export{u as a};
