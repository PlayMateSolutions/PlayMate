import{a as Zt}from"./chunk-SHAQBHSZ.js";import{a as Qt}from"./chunk-3CHMVPX7.js";import{a as w}from"./chunk-P5NOT2UF.js";import"./chunk-4D53AV6Y.js";import{a as P,c as kt}from"./chunk-MBYQTTWT.js";import{a as Tt,e as It,f as L}from"./chunk-PPFNTUBO.js";import"./chunk-T47TWMLD.js";import{B as Ut,C as Vt,G as $t,L as Ht,M as qt,N as Gt,P as Yt,Q as Xt,R as Jt,S as Kt,a as Et,d as Wt,e as jt,i as zt,j as Lt,m as Ft,o as Nt,t as Rt,u as Bt}from"./chunk-KQP4CTSV.js";import{$b as wt,A as k,Ba as U,Ca as tt,Da as et,G,H as Y,Ka as nt,Kb as gt,Lb as mt,Mb as ut,Nb as pt,Oa as it,Ob as ft,Pa as at,Q as m,Qb as yt,R as T,Sa as ot,Sb as bt,T as X,Ta as rt,Ua as st,Vb as Ct,Y as B,_ as C,_a as ct,aa as s,ba as h,c as O,ca as M,cc as Mt,ec as xt,fb as lt,ga as J,hc as St,ia as v,ib as dt,j as W,ja as _,kc as Dt,lc as vt,mc as _t,nb as ht,sa as p,ta as j,ua as z,uc as Pt,wa as K,wc as At,x as q,xa as Q,ya as Z,zc as Ot}from"./chunk-SZXUWVBX.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as E,b as H,i as x}from"./chunk-OYAVQN5W.js";var te=(()=>{let g=class g{constructor(t,n,e,i){this.http=t,this.authService=n,this.clubContext=e,this.memberService=i,this.apiUrl=Tt.apiUrl,this.attendanceSubject=new O([]),this.analyticsSubject=new O(null),this.loadingSubject=new O(!1),this.lastSyncSubject=new O(null),this.attendance$=this.attendanceSubject.asObservable(),this.analytics$=this.analyticsSubject.asObservable(),this.loading$=this.loadingSubject.asObservable(),this.lastSync$=this.lastSyncSubject.asObservable(),this.attendanceSubject.next([]),this.analyticsSubject.next(null),this.loadingSubject.next(!1),this.lastSyncSubject.next(null),setTimeout(()=>this.loadCachedData(),1e3)}loadCachedData(){return x(this,null,function*(){try{console.log("Loading cached attendance data...");let t=yield w.getAll(),n=yield w.getLastSyncTime();console.log("Cached attendance records:",t.length),t.length>0&&(this.attendanceSubject.next(t),this.calculateAnalytics(t)),this.lastSyncSubject.next(n)}catch(t){console.error("Error loading cached data:",t)}})}initializeData(){return x(this,null,function*(){try{this.loadingSubject.next(!0),yield this.loadCachedData();let t=yield w.getLastSyncTime();(this.attendanceSubject.value.length===0||!t||new Date().getTime()-t.getTime()>5*60*1e3)&&this.syncAttendance().catch(e=>{console.error("Background sync failed:",e)})}catch(t){console.error("Error initializing attendance data:",t)}finally{this.loadingSubject.next(!1)}})}syncAttendance(t=!1){return x(this,null,function*(){var n;try{this.loadingSubject.next(!0);let e=yield this.authService.getAuthToken(),i=this.clubContext.getSportsClubId()||"";console.log("Attendance sync - Token:",e?"Present":"Missing"),console.log("Attendance sync - Club ID:",i);let a={};if(!t){let c=yield w.getLastAttendanceId();c&&(a.lastAttendanceId=c)}let o=new rt().set("action","getAttendance").set("sportsClubId",i).set("authorization",e?"Bearer "+e:"");Object.keys(a).length>0&&(o=o.set("payload",JSON.stringify(a)));let S={headers:new ot({"Content-Type":"text/plain;charset=utf-8"}),params:o,responseType:"json",observe:"body"},f=yield this.http.get(this.apiUrl,S).toPromise();if((f==null?void 0:f.status)==="error")throw new Error(((n=f.error)==null?void 0:n.message)||"API returned error status");if((f==null?void 0:f.status)==="success"&&f.data){let c=Array.isArray(f.data)?f.data:[f.data];if(c=yield this.linkWithMemberData(c),t||!(yield w.getLastAttendanceId())?yield w.setAll(c):yield w.addRecords(c),c.length>0){let I=Math.max(...c.map(F=>parseInt(F.id||"0"))).toString();yield w.setLastAttendanceId(I)}yield w.setLastSyncTime(new Date),this.lastSyncSubject.next(new Date),this.clubContext.setLastAttendanceRefresh(new Date);let y=yield w.getAll();this.attendanceSubject.next(y),this.calculateAnalytics(y)}}catch(e){throw console.error("Error syncing attendance:",e),e}finally{this.loadingSubject.next(!1)}})}linkWithMemberData(t){return x(this,null,function*(){try{console.log("Linking attendance records with member data:",t.length);let n=yield new Promise((i,a)=>{let o=setTimeout(()=>{console.warn("Member service timeout, proceeding without member data"),i([])},5e3);this.memberService.getMembers().subscribe({next:u=>{clearTimeout(o),console.log("Members fetched for linking:",u.members.length),i(u.members)},error:u=>{clearTimeout(o),console.error("Error fetching members:",u),i([])}})}),e=new Map(n.map(i=>[i.id,i]));return console.log("Member map created with",e.size,"members"),t.map(i=>{let a=e.get(i.memberId),o=H(E({},i),{memberName:a?`${a.firstName} ${a.lastName}`.trim():"Unknown Member",membershipStatus:i.membershipStatus||"unknown"});return!a&&n.length>0&&console.warn("Member not found for attendance record:",i.memberId),o})}catch(n){return console.error("Error linking member data:",n),t}})}getFilteredAttendance(t){return this.attendance$.pipe(W(n=>this.applyFilters(n,t)))}applyFilters(t,n){let e=[...t];if(n.startDate&&(e=e.filter(i=>new Date(i.date)>=n.startDate)),n.endDate&&(e=e.filter(i=>new Date(i.date)<=n.endDate)),n.memberId&&(e=e.filter(i=>i.memberId===n.memberId)),n.membershipStatus&&n.membershipStatus!=="all"&&(e=e.filter(i=>i.membershipStatus===n.membershipStatus)),n.searchTerm){let i=n.searchTerm.toLowerCase();e=e.filter(a=>{var o,u;return((o=a.memberName)==null?void 0:o.toLowerCase().includes(i))||((u=a.notes)==null?void 0:u.toLowerCase().includes(i))})}return e}calculateAnalytics(t){var $;if(t.length===0){this.analyticsSubject.next(null);return}let n=new Map,e=new Map,i=new Map;t.forEach(r=>{let d=new Date(r.date).toDateString(),A=new Date(r.checkInTime).getHours();n.has(d)||n.set(d,{date:d,totalCheckins:0,activeMembers:0,expiredMembers:0,averageDuration:0,uniqueMembers:0});let D=n.get(d);D.totalCheckins++,r.membershipStatus==="active"?D.activeMembers++:r.membershipStatus==="expired"&&D.expiredMembers++,r.duration&&(D.averageDuration=(D.averageDuration+r.duration)/2),e.has(r.memberId)||e.set(r.memberId,new Set),e.get(r.memberId).add(d),i.set(A,(i.get(A)||0)+1)}),n.forEach((r,d)=>{let A=0;e.forEach(D=>{D.has(d)&&A++}),r.uniqueMembers=A});let a=Array.from(n.values()).sort((r,d)=>new Date(r.date).getTime()-new Date(d.date).getTime()),o=a.map(r=>r.totalCheckins),u=e.size,S=o.reduce((r,d)=>r+d,0)/o.length||0,f=Math.min(...o)||0,c=Math.max(...o)||0,y=t.filter(r=>r.membershipStatus==="active").length,I=t.filter(r=>r.membershipStatus==="expired").length,F=I>0?y/I:y,N=new Map;a.forEach(r=>{let d=new Date(r.date).toLocaleDateString("en-US",{weekday:"long"});N.set(d,(N.get(d)||0)+r.totalCheckins)});let ee=(($=Array.from(N.entries()).sort((r,d)=>d[1]-r[1])[0])==null?void 0:$[0])||"Monday",V=a.slice(-14),R=V.slice(0,7).reduce((r,d)=>r+d.totalCheckins,0),ne=V.slice(7,14).reduce((r,d)=>r+d.totalCheckins,0),ie=R>0?(ne-R)/R*100:0,ae=Array.from(i.entries()).map(([r,d])=>({hour:r,count:d})).sort((r,d)=>d.count-r.count).slice(0,5),oe={dailyStats:a,summary:{totalActiveUsers:u,averageDaily:Math.round(S*100)/100,minDaily:f,maxDaily:c,activeVsExpiredRatio:Math.round(F*100)/100,totalAttendanceRecords:t.length},trends:{weeklyGrowth:Math.round(ie*100)/100,mostActiveDay:ee,peakHours:ae}};this.analyticsSubject.next(oe)}refreshData(){return x(this,null,function*(){yield this.syncAttendance(!0)})}loadData(){return x(this,null,function*(){yield this.initializeData()})}getAttendanceByMember(t){return this.attendance$.pipe(W(n=>n.filter(e=>e.memberId===t)))}getAttendanceByDateRange(t,n){return this.attendance$.pipe(W(e=>e.filter(i=>{let a=new Date(i.date);return a>=t&&a<=n})))}};g.\u0275fac=function(n){return new(n||g)(k(st),k(It),k(L),k(Qt))},g.\u0275prov=q({token:g,factory:g.\u0275fac,providedIn:"root"});let l=g;return l})();function le(l,g){l&1&&M(0,"ion-spinner",20)}function de(l,g){l&1&&M(0,"ion-icon",21)}function he(l,g){l&1&&(s(0,"div",22),M(1,"ion-spinner",20),s(2,"ion-text",23),p(3,"Loading attendance data..."),h()())}function ge(l,g){if(l&1&&(s(0,"div",24)(1,"div",25)(2,"ion-text",26),p(3),U(4,"relativeTime"),h()()()),l&2){let b=_();m(3),z(" Last synced: ",tt(4,1,b.lastAttendanceSync)," ")}}function me(l,g){if(l&1){let b=J();s(0,"div",27)(1,"div",28),v("click",function(){G(b);let n=_();return Y(n.navigateToAttendanceDetails())}),s(2,"div",29),M(3,"ion-icon",30),h(),s(4,"div",31),p(5,"Active Users"),h(),s(6,"div",32),p(7),h(),s(8,"div",33),M(9,"ion-icon",34),s(10,"small"),p(11,"View Details"),h()()(),s(12,"div",35)(13,"div",36),M(14,"ion-icon",37),h(),s(15,"div",31),p(16,"Avg Daily"),h(),s(17,"div",32),p(18),U(19,"number"),h()()()}if(l&2){let b=_();m(7),j(b.uniqueMembersCount),m(11),j(et(19,2,b.averageAttendance,"1.0-1"))}}function ue(l,g){if(l&1&&(s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),p(3),h()(),s(4,"ion-card-content")(5,"div",38),M(6,"google-chart",39),h()()()),l&2){let b=_();m(3),j(b.getChartTitle()),m(3),C("type",b.chartType)("data",b.chartData)("columns",b.chartColumns)("options",b.chartOptions)("height",300)}}function pe(l,g){if(l&1&&(s(0,"ion-card")(1,"ion-card-content",40),M(2,"ion-icon",41),s(3,"ion-text",23)(4,"h3"),p(5),h(),s(6,"p"),p(7,"There are no attendance records for this period."),h(),s(8,"p"),p(9,"Try changing the date range or refresh the data."),h()()()()),l&2){let b=_();m(5),z("No Data for ",b.getCurrentPeriodText(),"")}}var Le=(()=>{let g=class g{constructor(t,n,e,i){this.attendanceService=t,this.toastController=n,this.router=e,this.clubContext=i,this.loading=!0,this.refreshing=!1,this.viewPeriod="weekly",this.currentDate=new Date,this.currentWeekStart=new Date,this.currentMonth=new Date,this.dailyData=[],this.chartData=[],this.chartColumns=["Date","Attendance",{type:"string",role:"tooltip"},{type:"string",role:"annotation"}],this.chartType=P.ColumnChart,this.uniqueMembersCount=0,this.averageAttendance=0,this.highestAttendance={day:"",count:0},this.lowestAttendance={day:"",count:0},this.daysWithNoAttendance=0,this.totalAttendanceCount=0,this.expiredMembershipsCount=0,this.hasDataForCurrentPeriod=!1,this.lastAttendanceSync=null,this.chartOptions={backgroundColor:"transparent",colors:["#4CAF50"],chartArea:{left:20,top:20,width:"90%",height:"75%"},hAxis:{textStyle:{fontSize:12,color:"#666"},gridlines:{color:"transparent"}},vAxis:{textStyle:{fontSize:12,color:"#666"},gridlines:{color:"#e0e0e0",count:5},minValue:0},legend:{position:"none"},animation:{startup:!0,duration:1e3,easing:"out"}},Et({refresh:$t,chevronBackOutline:Ft,chevronForwardOutline:Nt,peopleOutline:Vt,calendarOutline:Lt,trendingUpOutline:Kt,trendingDownOutline:Xt,statsChartOutline:qt,eyeOutline:Bt,analyticsOutline:jt,timeOutline:Gt,people:Ut,calendar:zt,statsChart:Ht,trendingUp:Jt,trendingDown:Yt,eye:Rt,analytics:Wt}),this.setCurrentWeekStart(),this.currentMonth=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1),this.lastAttendanceSync=this.clubContext.getLastAttendanceRefresh()}ngOnInit(){this.viewPeriod==="weekly"?this.chartType=P.ColumnChart:this.viewPeriod==="monthly"&&(this.chartType=P.LineChart),this.loadAttendanceData()}loadAttendanceData(){return x(this,null,function*(){try{this.loading=!0,console.log("Loading attendance data from IndexedDB...");let t=yield w.getAll();console.log("Loaded records:",t.length);let n=this.getDateRangeForCurrentView(),e=new Date(n[0]),i=new Date(n[n.length-1]);i.setHours(23,59,59,999);let a=t.filter(o=>{let u=new Date(o.date);return u>=e&&u<=i});this.hasDataForCurrentPeriod=a.length>0,this.dailyData=this.calculateDailyAttendance(t),this.chartData=this.prepareChartData(this.dailyData),this.calculateStatistics(this.dailyData,t),this.updateChartOptions(),this.lastAttendanceSync=this.clubContext.getLastAttendanceRefresh(),console.log("Daily data:",this.dailyData),console.log("Chart data:",this.chartData),console.log("Has data for current period:",this.hasDataForCurrentPeriod)}catch(t){console.error("Error loading attendance data:",t)}finally{this.loading=!1}})}calculateDailyAttendance(t){let n=new Map;t.forEach(a=>{let o=new Date(a.date).toISOString().split("T")[0];n.set(o,(n.get(o)||0)+1)});let e=this.getDateRangeForCurrentView(),i=[];return e.forEach(a=>{let o=n.get(a)||0;i.push({date:a,count:o})}),i}getDateRangeForCurrentView(){let t=[];switch(this.viewPeriod){case"weekly":for(let a=0;a<7;a++){let o=new Date(this.currentWeekStart);o.setDate(this.currentWeekStart.getDate()+a),t.push(o.toISOString().split("T")[0])}break;case"monthly":let n=this.currentMonth.getFullYear(),e=this.currentMonth.getMonth(),i=new Date(n,e+1,0).getDate();for(let a=1;a<=i;a++){let o=new Date(n,e,a);t.push(o.toISOString().split("T")[0])}break;default:for(let a=29;a>=0;a--){let o=new Date(this.currentDate);o.setDate(this.currentDate.getDate()-a),t.push(o.toISOString().split("T")[0])}break}return t}setCurrentWeekStart(){let t=new Date,n=t.getDay(),e=n===0?6:n-1;this.currentWeekStart=new Date(t),this.currentWeekStart.setDate(t.getDate()-e),this.currentWeekStart.setHours(0,0,0,0)}prepareChartData(t){return!t||t.length===0?[]:(t.sort((n,e)=>new Date(n.date).getTime()-new Date(e.date).getTime()),t.map(n=>{let e=n.count||0;return[this.formatDate(n.date),e,`${n.date}: ${e} ${e===1?"person":"people"}`,e.toString()]}))}calculateStatistics(t,n){if(!t||t.length===0){this.uniqueMembersCount=0,this.averageAttendance=0,this.highestAttendance={day:"",count:0},this.lowestAttendance={day:"",count:0},this.daysWithNoAttendance=0,this.totalAttendanceCount=0,this.expiredMembershipsCount=0;return}let e=this.getDateRangeForCurrentView(),i=new Date(e[0]),a=new Date(e[e.length-1]);a.setHours(23,59,59,999);let o=n.filter(c=>{let y=new Date(c.date);return y>=i&&y<=a});this.totalAttendanceCount=t.reduce((c,y)=>c+(y.count||0),0),this.averageAttendance=this.totalAttendanceCount/t.length;let u={day:"",count:0},S={day:"",count:Number.MAX_SAFE_INTEGER};t.forEach(c=>{let y=c.count||0;y>u.count&&(u={day:c.date,count:y}),y<S.count&&(S={day:c.date,count:y})}),this.highestAttendance=u,this.lowestAttendance=S.count===Number.MAX_SAFE_INTEGER?{day:"",count:0}:S,this.daysWithNoAttendance=t.filter(c=>!c.count||c.count===0).length,this.expiredMembershipsCount=o.filter(c=>c.membershipStatus==="expired").length;let f=new Set(o.map(c=>c.memberId));this.uniqueMembersCount=f.size}formatDateForDisplay(t,n=this.viewPeriod){let e=new Date(t);switch(n){case"weekly":return e.toLocaleDateString("en-US",{weekday:"short"});case"monthly":return e.toLocaleDateString("en-US",{day:"numeric"});default:return e.toLocaleDateString("en-US",{weekday:"short"})}}formatDate(t){return this.formatDateForDisplay(t)}refreshAttendance(){return x(this,null,function*(){try{this.refreshing=!0,console.log("Refreshing attendance data..."),yield this.attendanceService.syncAttendance(!1),yield this.loadAttendanceData(),console.log("Attendance data refreshed successfully"),yield(yield this.toastController.create({message:"Attendance data refreshed successfully",duration:3e3,color:"success",position:"top"})).present()}catch(t){console.error("Error refreshing attendance data:",t),yield(yield this.toastController.create({message:"Failed to refresh attendance data",duration:3e3,color:"danger",position:"top"})).present()}finally{this.refreshing=!1}})}onPeriodChange(t){this.viewPeriod=t.detail.value,console.log("Period changed to:",this.viewPeriod),this.viewPeriod==="weekly"?this.chartType=P.ColumnChart:this.viewPeriod==="monthly"&&(this.chartType=P.LineChart),this.viewPeriod==="weekly"?this.setCurrentWeekStart():this.viewPeriod==="monthly"&&(this.currentMonth=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1)),this.loadAttendanceData()}goToPreviousWeek(){this.currentWeekStart.setDate(this.currentWeekStart.getDate()-7),this.loadAttendanceData()}goToNextWeek(){this.currentWeekStart.setDate(this.currentWeekStart.getDate()+7),this.loadAttendanceData()}goToPreviousMonth(){this.currentMonth.setMonth(this.currentMonth.getMonth()-1),this.loadAttendanceData()}goToNextMonth(){this.currentMonth.setMonth(this.currentMonth.getMonth()+1),this.loadAttendanceData()}navigateToAttendanceDetails(){let t=this.getDateRangeForCurrentView(),n=t[0],e=t[t.length-1];this.router.navigate(["/tabs/attendance-details"],{queryParams:{startDate:n,endDate:e,period:this.viewPeriod,periodLabel:this.getCurrentPeriodText(),scrollToDate:n},skipLocationChange:!1})}getCurrentPeriodText(){switch(this.viewPeriod){case"weekly":let t=new Date(this.currentWeekStart);return t.setDate(this.currentWeekStart.getDate()+6),`${this.currentWeekStart.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`;case"monthly":return this.currentMonth.toLocaleDateString("en-US",{year:"numeric",month:"long"});default:return"This Week"}}getChartTitle(){return`${this.viewPeriod.charAt(0).toUpperCase()+this.viewPeriod.slice(1)} Attendance Analytics`}canGoToNextWeek(){let t=new Date(this.currentWeekStart);return t.setDate(this.currentWeekStart.getDate()+7),t<=new Date}canGoToNextMonth(){let t=new Date(this.currentMonth);t.setMonth(this.currentMonth.getMonth()+1);let n=new Date;return t<=new Date(n.getFullYear(),n.getMonth(),1)}updateChartOptions(){let t=this.chartData.length>0?Math.max(...this.chartData.map(n=>n[1]),10)*1.1:10;this.chartOptions={backgroundColor:"transparent",colors:["#4CAF50"],chartArea:{left:20,top:20,width:this.viewPeriod==="monthly"&&this.chartData.length>20?"80%":"90%",height:"75%"},hAxis:E({textStyle:{fontSize:12,color:"#666"},gridlines:{color:"transparent"}},this.viewPeriod==="monthly"?{showTextEvery:5}:{}),vAxis:{textStyle:{fontSize:12,color:"#666"},gridlines:{color:"#e0e0e0",count:5},minValue:0,viewWindow:{min:0,max:t}},legend:{position:"none"},animation:{startup:!0,duration:1e3,easing:"out"},annotations:{textStyle:{fontSize:12,color:"#fff",bold:!0},alwaysOutside:!1,stem:{color:"transparent",length:0}}}}};g.\u0275fac=function(n){return new(n||g)(T(te),T(Pt),T(ct),T(L))},g.\u0275cmp=X({type:g,selectors:[["app-attendance"]],decls:33,vars:13,consts:[[3,"translucent"],["color","primary"],["slot","start"],["slot","end"],[3,"click","disabled"],["name","crescent",4,"ngIf"],["name","refresh","slot","icon-only",4,"ngIf"],["mode","ios",3,"ngModelChange","ionChange","ngModel"],["value","weekly"],["value","monthly"],["fill","clear",3,"click"],["name","chevron-back-outline","slot","icon-only"],["size","small",1,"period-title"],["fill","clear",3,"click","disabled"],["name","chevron-forward-outline","slot","icon-only"],[3,"fullscreen"],["class","loading-container",4,"ngIf"],["class","results-row",4,"ngIf"],["class","stats-grid",4,"ngIf"],[4,"ngIf"],["name","crescent"],["name","refresh","slot","icon-only"],[1,"loading-container"],["color","medium"],[1,"results-row"],[1,"last-sync-info"],["color","medium",1,"last-sync-label"],[1,"stats-grid"],[1,"stat-card",3,"click"],[1,"stat-icon","active-users"],["name","people"],[1,"stat-label"],[1,"stat-value"],[1,"view-details"],["name","chevron-forward-outline","size","small"],[1,"stat-card"],[1,"stat-icon","avg-daily"],["name","calendar"],[2,"display","flex","justify-content","center","align-items","center"],[3,"type","data","columns","options","height"],[1,"no-data"],["name","analytics-outline","size","large","color","medium"]],template:function(n,e){n&1&&(s(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),M(3,"ion-menu-button"),h(),s(4,"ion-title"),p(5,"Attendance Analytics"),h(),s(6,"ion-buttons",3)(7,"ion-button",4),v("click",function(){return e.refreshAttendance()}),B(8,le,1,0,"ion-spinner",5)(9,de,1,0,"ion-icon",6),h()()(),s(10,"ion-toolbar")(11,"ion-segment",7),Z("ngModelChange",function(a){return Q(e.viewPeriod,a)||(e.viewPeriod=a),a}),v("ionChange",function(a){return e.onPeriodChange(a)}),s(12,"ion-segment-button",8)(13,"ion-label"),p(14,"Weekly"),h()(),s(15,"ion-segment-button",9)(16,"ion-label"),p(17,"Monthly"),h()()()(),s(18,"ion-toolbar")(19,"ion-buttons",2)(20,"ion-button",10),v("click",function(){return e.viewPeriod==="weekly"?e.goToPreviousWeek():e.goToPreviousMonth()}),M(21,"ion-icon",11),h()(),s(22,"ion-title",12),p(23),h(),s(24,"ion-buttons",3)(25,"ion-button",13),v("click",function(){return e.viewPeriod==="weekly"?e.goToNextWeek():e.goToNextMonth()}),M(26,"ion-icon",14),h()()()(),s(27,"ion-content",15),B(28,he,4,0,"div",16)(29,ge,5,3,"div",17)(30,me,20,5,"div",18)(31,ue,7,6,"ion-card",19)(32,pe,10,1,"ion-card",19),h()),n&2&&(C("translucent",!0),m(7),C("disabled",e.loading||e.refreshing),m(),C("ngIf",e.refreshing),m(),C("ngIf",!e.refreshing),m(2),K("ngModel",e.viewPeriod),m(12),z(" ",e.getCurrentPeriodText()," "),m(2),C("disabled",e.viewPeriod==="weekly"?!e.canGoToNextWeek():!e.canGoToNextMonth()),m(2),C("fullscreen",!0),m(),C("ngIf",e.loading),m(),C("ngIf",!e.loading),m(),C("ngIf",!e.loading&&e.hasDataForCurrentPeriod),m(),C("ngIf",!e.loading&&e.hasDataForCurrentPeriod),m(),C("ngIf",!e.loading&&!e.hasDataForCurrentPeriod))},dependencies:[at,nt,it,ht,lt,dt,Ct,_t,vt,bt,ut,ft,yt,pt,St,Dt,mt,Mt,gt,At,Ot,xt,wt,kt,Zt],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;gap:1rem}.period-title[_ngcontent-%COMP%]{text-align:center;font-size:1rem;font-weight:500}.no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;display:flex;flex-direction:column;align-items:center;gap:1rem}.no-data[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:.5rem}.no-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:.5rem}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium-tint);margin:.25rem 0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:12px}.stat-card[_ngcontent-%COMP%]{background-color:var(--ion-card-background);border-radius:8px;padding:16px;display:flex;flex-direction:column;align-items:flex-start;box-shadow:0 4px 6px #0000001a;position:relative;transition:background-color .2s ease}.stat-card[_ngcontent-%COMP%]:active{background-color:#0000000d}.view-details[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;display:flex;align-items:center;font-size:12px;color:var(--ion-color-medium)}.view-details[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:4px}.stat-icon[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;margin-bottom:12px}.stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#fff}.stat-icon.active-users[_ngcontent-%COMP%]{background-color:#e53935}.stat-icon.avg-daily[_ngcontent-%COMP%]{background-color:#3949ab}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium);margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-bottom:4px}.stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--ion-text-color, var(--ion-color-dark))}.insights-section[_ngcontent-%COMP%]{padding:0 12px;margin-top:12px}.insights-section[_ngcontent-%COMP%]   .insights-title[_ngcontent-%COMP%]{font-size:16px;color:#fff;display:flex;align-items:center;margin:0 0 12px}.insights-section[_ngcontent-%COMP%]   .insights-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]{background-color:#1e1e1e;border-radius:8px;padding:12px 16px;margin-bottom:12px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:6px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   ion-icon.negative[_ngcontent-%COMP%]{color:#e53935}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   .insight-title[_ngcontent-%COMP%]{font-size:14px;color:#fff;flex-grow:1}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   .insight-value[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   .insight-value.negative[_ngcontent-%COMP%]{color:#e53935}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-description[_ngcontent-%COMP%]{font-size:13px;color:#888}ion-segment-button.segment-button-checked[_ngcontent-%COMP%], ion-segment-button.segment-button-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#000!important;--color: #000 !important}.bottom-tabs[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:#1a1a1a;padding:10px 0;position:fixed;bottom:0;left:0;right:0;z-index:10;border-top:1px solid #333333}.bottom-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.bottom-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#888}.bottom-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{font-size:10px;margin-top:4px;color:#888}.bottom-tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#e53935}.bottom-tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{color:#e53935}.last-sync-info[_ngcontent-%COMP%]{padding-right:16px;padding-top:8px;font-size:.9em;opacity:.7;vertical-align:middle;text-align:right}"]});let l=g;return l})();export{Le as AttendancePage};
