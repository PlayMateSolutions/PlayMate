import{e as X,f as Y}from"./chunk-IEVPBU5H.js";import"./chunk-T47TWMLD.js";import{$ as e,$b as F,Bc as Q,Hb as T,Ja as y,Jb as D,Kb as L,Oa as M,P as _,Q as r,R as g,Rb as N,T as f,Ub as A,X as v,Xb as B,Yb as W,Z as c,Za as k,Zb as j,_b as U,aa as t,ba as p,bc as G,cc as O,eb as P,ec as q,ha as u,hb as w,ia as E,kc as z,lc as H,mb as x,ra as n,sa as S,tc as R,va as I,vc as V,wa as b,wc as J,xa as C,zc as K}from"./chunk-FQHFODV6.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{i as h}from"./chunk-OYAVQN5W.js";function $(d,s){if(d&1&&(e(0,"ion-avatar",1),p(1,"img",15),t()),d&2){let Z=E();r(),c("src",Z.userPicture,_)}}var de=(()=>{let s=class s{constructor(o,m,i,l){this.clubContext=o,this.toastCtrl=m,this.router=i,this.authService=l,this.sportsClubId="",this.hasChanges=!1,this.darkMode=!1,this.language="en",this.userEmail="",this.userName="",this.userPicture="",this.darkMode=document.body.classList.contains("dark-theme"),this.language=localStorage.getItem("language")||"en"}ngOnInit(){let o=this.clubContext.getSportsClubId();this.sportsClubId=o||"",this.loadUserInfo()}loadUserInfo(){this.authService.userSession$.subscribe(o=>{o&&(this.userEmail=o.email,this.userName=o.name,this.userPicture=o.picture||"")})}settingsChanged(){this.hasChanges=!0}saveSettings(){return h(this,null,function*(){this.sportsClubId.trim()?(this.clubContext.setSportsClubId(this.sportsClubId.trim()),yield(yield this.toastCtrl.create({message:"Settings saved successfully!",duration:1500,color:"success"})).present(),this.hasChanges=!1):(yield this.toastCtrl.create({message:"Please enter a valid Sports Club ID.",duration:1500,color:"danger"})).present()})}toggleDarkMode(){document.body.classList.toggle("dark-theme",this.darkMode),localStorage.setItem("darkMode",this.darkMode.toString())}changeLanguage(){localStorage.setItem("language",this.language)}logout(){return h(this,null,function*(){try{yield this.authService.logout();let o=window.indexedDB.deleteDatabase("members");o.onsuccess=()=>{console.log("Members database deleted successfully")},o.onerror=()=>{console.error("Error deleting members database")},yield this.router.navigate(["/login"],{replaceUrl:!0})}catch(o){console.error("Logout error:",o),yield(yield this.toastCtrl.create({message:"Error during logout. Please try again.",duration:2e3,color:"danger"})).present()}})}};s.\u0275fac=function(m){return new(m||s)(g(Y),g(R),g(k),g(X))},s.\u0275cmp=f({type:s,selectors:[["app-settings"]],decls:63,vars:7,consts:[["color","primary"],["slot","start"],["slot","end"],[3,"click","disabled"],["slot","start","name","save-outline"],[1,"ion-padding"],["position","stacked"],["placeholder","Enter Sports Club ID","type","text",3,"ionInput","value"],[3,"ngModelChange","ionChange","ngModel"],["value","en"],["value","ta"],["lines","none"],["slot","start",4,"ngIf"],["slot","end","fill","clear","color","danger",3,"click"],["slot","start","name","log-out-outline"],["alt","Profile Picture",3,"src"]],template:function(m,i){m&1&&(e(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),p(3,"ion-menu-button"),t(),e(4,"ion-title"),n(5,"Settings"),t(),e(6,"ion-buttons",2)(7,"ion-button",3),u("click",function(){return i.saveSettings()}),p(8,"ion-icon",4),n(9," Save "),t()()()(),e(10,"ion-content",5)(11,"ion-list")(12,"ion-item-group")(13,"ion-item-divider")(14,"ion-label"),n(15,"Club Settings"),t()(),e(16,"ion-item")(17,"ion-label",6),n(18,"Sports Club ID"),t(),e(19,"ion-input",7),u("ionInput",function(a){return i.sportsClubId=a.target.value,i.settingsChanged()}),t(),e(20,"ion-note"),n(21,"This ID is used to identify your club in the system"),t()()(),e(22,"ion-item-group")(23,"ion-item-divider")(24,"ion-label"),n(25,"App Settings"),t()(),e(26,"ion-item")(27,"ion-label"),n(28,"Dark Mode"),t(),e(29,"ion-toggle",8),C("ngModelChange",function(a){return b(i.darkMode,a)||(i.darkMode=a),a}),u("ionChange",function(){return i.toggleDarkMode()}),t()(),e(30,"ion-item")(31,"ion-label"),n(32,"Language"),t(),e(33,"ion-select",8),C("ngModelChange",function(a){return b(i.language,a)||(i.language=a),a}),u("ionChange",function(){return i.changeLanguage()}),e(34,"ion-select-option",9),n(35,"English"),t(),e(36,"ion-select-option",10),n(37,"Tamil"),t()()()(),e(38,"ion-item-group")(39,"ion-item-divider")(40,"ion-label"),n(41,"Account"),t()(),e(42,"ion-item",11),v(43,$,2,1,"ion-avatar",12),e(44,"ion-label")(45,"h2"),n(46),t(),e(47,"p"),n(48),t(),e(49,"p"),n(50,"Google Account"),t()(),e(51,"ion-button",13),u("click",function(){return i.logout()}),p(52,"ion-icon",14),n(53," Logout "),t()()(),e(54,"ion-item-group")(55,"ion-item-divider")(56,"ion-label"),n(57,"About"),t()(),e(58,"ion-item")(59,"ion-label"),n(60,"Version"),t(),e(61,"ion-note",2),n(62,"1.0.0"),t()()()()()),m&2&&(r(7),c("disabled",!i.hasChanges),r(12),c("value",i.sportsClubId),r(10),I("ngModel",i.darkMode),r(4),I("ngModel",i.language),r(10),c("ngIf",i.userPicture),r(3),S(i.userName),r(2),S(i.userEmail))},dependencies:[M,y,x,P,w,A,H,L,G,z,D,V,N,F,j,W,B,U,J,O,Q,K,q,T],encapsulation:2});let d=s;return d})();export{de as SettingsPage};
