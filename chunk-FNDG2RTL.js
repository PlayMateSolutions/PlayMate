import{a as D}from"./chunk-R33Q6PEO.js";import{e as G,f as q}from"./chunk-ON4Y6KJF.js";import"./chunk-T47TWMLD.js";import{$ as f,Bc as j,Ic as L,N as m,Na as b,Ob as y,Qb as M,R as d,Rb as w,S as o,Sb as O,Ta as I,U as h,Ub as S,Wb as z,Z as u,Zb as E,ca as e,cb as P,da as n,ea as g,gd as R,ka as x,la as v,md as F,qc as k,rc as A,sb as _,ua as i,wa as C,zc as T}from"./chunk-AAX3YNDZ.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{i as l}from"./chunk-OYAVQN5W.js";function W(c,r){if(c&1&&(e(0,"div",9),i(1),n()),c&2){let H=v();d(),C(" ",H.error," ")}}var it=(()=>{let r=class r{constructor(t,a,s,p,N,Y,B){this.authService=t,this.router=a,this.platform=s,this.zone=p,this.toastController=N,this.clubContext=Y,this.appRefresher=B,this.error=null,L({logoGoogle:R,personCircleOutline:F})}ngOnInit(){return l(this,null,function*(){console.log("Login component initialized");try{this.platform.ready().then(()=>l(this,null,function*(){yield this.initializeAuth()}))}catch(t){console.error("Login initialization failed:",t),this.error="Failed to initialize login. Please try again later."}})}initializeAuth(){return l(this,null,function*(){console.log("Initializing authentication..."),(yield this.authService.initGoogleAuth())||(this.error="Failed to initialize authentication. Please check your internet connection and try again.")})}handleGoogleSignIn(){return l(this,null,function*(){try{if(this.error=null,yield this.zone.run(()=>this.authService.login()))this.clubContext.getSportsClubId()?(this.appRefresher.refreshAll&&(yield this.appRefresher.refreshAll()),yield this.router.navigate(["/tabs"])):yield this.router.navigate(["/settings"]);else throw new Error("Authentication failed")}catch(t){console.error("Login error:",t),this.error="Authentication failed. Please ensure you grant all required permissions.",yield this.showErrorToast("Authentication failed. Please try again.")}})}showErrorToast(t){return l(this,null,function*(){yield(yield this.toastController.create({message:t,duration:3e3,color:"danger",position:"bottom"})).present()})}};r.\u0275fac=function(a){return new(a||r)(o(G),o(P),o(_),o(m),o(T),o(q),o(D))},r.\u0275cmp=h({type:r,selectors:[["app-login"]],decls:26,vars:1,consts:[[1,"ion-padding"],[1,"app-logo"],["src","assets/icon/play-mate-icon-flat.png","alt","GymMate Logo",1,"logo-image"],[1,"login-container"],[1,"intro-text"],["expand","block",3,"click"],["slot","start","name","logo-google"],[1,"scope-info"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(a,s){a&1&&(e(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i(3,"Login"),n()()(),e(4,"ion-content",0)(5,"ion-card")(6,"ion-card-header")(7,"div",1),g(8,"img",2),n(),e(9,"ion-card-title"),i(10,"Welcome to GymMate"),n()(),e(11,"ion-card-content")(12,"div",3)(13,"div",4),i(14,"Please sign in with your Google account to continue"),n(),e(15,"ion-button",5),x("click",function(){return s.handleGoogleSignIn()}),g(16,"ion-icon",6),i(17," Sign in with Google "),n(),e(18,"div",7),i(19," This app requires access to: "),e(20,"ul")(21,"li"),i(22,"Google Sheets"),n(),e(23,"li"),i(24,"Your email address"),n()()(),u(25,W,2,1,"div",8),n()()()()),a&2&&(d(25),f("ngIf",s.error))},dependencies:[I,b,z,E,A,k,y,M,O,S,w,j],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color)}ion-card[_ngcontent-%COMP%]{margin:20px;border-radius:16px;box-shadow:0 8px 24px #0000001a;--background: var(--ion-card-background, var(--ion-background-color))}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding-top:0}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center}.app-logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.logo-image[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:16px;box-shadow:0 4px 12px #dc262633;transition:transform .3s ease}.logo-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}ion-card-title[_ngcontent-%COMP%]{text-align:center;color:var(--ion-color-primary);font-weight:600;font-size:1.4em}.scope-info[_ngcontent-%COMP%]{margin-top:20px;color:var(--ion-text-color-step-600, var(--ion-color-medium));font-size:.9em;text-align:left}.scope-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0;padding-left:20px}.intro-text[_ngcontent-%COMP%]{color:var(--ion-text-color, var(--ion-color-dark));margin-bottom:20px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin-top:16px;font-size:14px}ion-button[_ngcontent-%COMP%]{margin:20px 0;width:250px;--border-radius: 8px;--box-shadow: 0 4px 12px rgba(0, 0, 0, .1);font-weight:500}ion-button[_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 16px rgba(0, 0, 0, .15);transform:translateY(-2px)}ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}"]});let c=r;return c})();export{it as LoginPage};
