import{a as wt,c as At}from"./chunk-DMPXL4OQ.js";import{b as Tt}from"./chunk-RQND6QKF.js";import{a as Pt,b as Et,c as O,d as kt,e as h,f as Ft}from"./chunk-DKOTMEXB.js";import"./chunk-T47TWMLD.js";import{B as Dt,a as Rt,u as $t}from"./chunk-T6P2KMMV.js";import{$ as r,$a as ut,A as l,Aa as w,Bb as ft,Ca as nt,D as X,Eb as dt,Fb as gt,G as Y,Gb as ht,H as Z,Hb as vt,Ia as A,Ka as T,Na as P,Ob as It,P as tt,Pa as rt,Q as v,R as c,Rb as Ct,Sa as E,T as _,Ta as st,U as et,Ua as at,Ub as $,Va as lt,Vb as _t,Wa as ct,X as S,Xa as k,Xb as D,Ya as g,Yb as F,Z as I,Za as mt,Zb as St,_a as pt,aa as a,ba as u,fa as it,gc as bt,h as G,ha as d,hc as yt,ia as M,j as W,kc as L,lc as xt,oc as Mt,pc as jt,q as J,ra as f,rc as b,sa as B,t as K,x as C,y as Q,ya as ot,za as j,zb as R}from"./chunk-73AFXQHC.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{h as N,i as p}from"./chunk-OYAVQN5W.js";var Lt=(()=>{let t=class t{http;prefix;suffix;constructor(o,i="/assets/i18n/",n=".json"){this.http=o,this.prefix=i,this.suffix=n}getTranslation(o){return this.http.get(`${this.prefix}${o}${this.suffix}`)}};N(t,"\u0275fac",function(i){return new(i||t)(l(E),l(String),l(String))}),N(t,"\u0275prov",C({token:t,factory:t.\u0275fac}));let e=t;return e})();var H=(()=>{let t=class t{constructor(o,i){this.authService=o,this.router=i}canActivate(){return this.authService.isAuthenticated$.pipe(K(1),W(o=>o?!0:(this.router.navigate(["/login"]),!1)))}};t.\u0275fac=function(i){return new(i||t)(l(h),l(g))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ot=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-6CT5UCTV.js").then(e=>e.LoginPage)},{path:"settings",canActivate:[H],loadComponent:()=>import("./chunk-W3TH5ZQ7.js").then(e=>e.SettingsPage)},{path:"attendance-details",canActivate:[H],loadComponent:()=>import("./chunk-DYHAWJ46.js").then(e=>e.AttendanceDetailsPage)},{path:"tabs",canActivate:[H],loadChildren:()=>import("./chunk-ACWCX7MB.js").then(e=>e.routes)}];var Ht=(()=>{let t=class t{constructor(o,i){this.router=o,this.menu=i}navigate(o){return p(this,null,function*(){yield this.menu.close(),yield this.router.navigate([o])})}};t.\u0275fac=function(i){return new(i||t)(c(g),c(Mt))},t.\u0275cmp=_({type:t,selectors:[["app-menu"]],decls:26,vars:0,consts:[["contentId","main-content"],["color","primary"],["button","","detail","",3,"click"],["slot","start","name","people-outline"],["slot","start","name","cash-outline"],["slot","start","name","calendar-outline"],["slot","start","name","settings-outline"]],template:function(i,n){i&1&&(r(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title"),f(4,"PlayMate"),a()()(),r(5,"ion-content")(6,"ion-list")(7,"ion-item",2),d("click",function(){return n.navigate("/tabs/members")}),u(8,"ion-icon",3),r(9,"ion-label"),f(10,"Members"),a()(),r(11,"ion-item",2),d("click",function(){return n.navigate("/tabs/payments")}),u(12,"ion-icon",4),r(13,"ion-label"),f(14,"Payments"),a()(),r(15,"ion-item",2),d("click",function(){return n.navigate("/tabs/attendance")}),u(16,"ion-icon",5),r(17,"ion-label"),f(18,"Attendance"),a()(),r(19,"ion-item-divider")(20,"ion-label"),f(21,"Admin"),a()(),r(22,"ion-item",2),d("click",function(){return n.navigate("/settings")}),u(23,"ion-icon",6),r(24,"ion-label"),f(25,"Settings"),a()()()()())},dependencies:[St,Ct,yt,bt,It,F,$,b,D,_t],encapsulation:2});let e=t;return e})();var Nt=(()=>{let t=class t{constructor(o,i,n){this.toastController=o,this.router=i,this.authService=n}intercept(o,i){return i.handle(o).pipe(J(n=>{var x,q;let s="An error occurred";return n.error instanceof ErrorEvent?s=`Error: ${n.error.message}`:n.status===401?(this.authService.logout(),this.router.navigate(["/login"]),s="Session expired. Please log in again."):(q=(x=n.error)==null?void 0:x.error)!=null&&q.message?s=n.error.error.message:s=`Error Code: ${n.status}
Message: ${n.message}`,this.presentErrorToast(s),G(()=>n)}))}presentErrorToast(o){return p(this,null,function*(){yield(yield this.toastController.create({message:o,duration:3e3,position:"bottom",color:"danger",buttons:[{text:"Dismiss",role:"cancel"}]})).present()})}};t.\u0275fac=function(i){return new(i||t)(l(jt),l(g),l(h))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})();function qt(e,t){if(e&1&&(r(0,"ion-item")(1,"ion-label")(2,"h2"),f(3),a(),r(4,"p"),f(5),a()()()),e&2){let m=t.ngIf;v(3),B(m.name),v(2),B(m.email)}}var Bt=(()=>{let t=class t{constructor(o,i){this.authService=o,this.popoverController=i,this.userSession$=this.authService.userSession$}logout(){this.popoverController.dismiss(null,"logout")}};t.\u0275fac=function(i){return new(i||t)(c(h),c(L))},t.\u0275cmp=_({type:t,selectors:[["app-profile-menu"]],decls:7,vars:3,consts:[[4,"ngIf"],["button","",3,"click"],["slot","start","name","log-out-outline"]],template:function(i,n){i&1&&(r(0,"ion-list"),S(1,qt,6,2,"ion-item",0),j(2,"async"),r(3,"ion-item",1),d("click",function(){return n.logout()}),u(4,"ion-icon",2),r(5,"ion-label"),f(6,"Logout"),a()()()),i&2&&(v(),I("ngIf",w(2,1,n.userSession$)))},dependencies:[P,A,T,F,$,D,b],styles:["ion-list[_ngcontent-%COMP%]{margin:0;padding:0}h2[_ngcontent-%COMP%]{font-weight:500;margin:0}p[_ngcontent-%COMP%]{margin:4px 0 0;color:var(--ion-color-medium)}"]});let e=t;return e})();function Gt(e,t){if(e&1&&u(0,"img",8),e&2){let m=M().ngIf;I("src",m.picture,tt)}}function Wt(e,t){e&1&&u(0,"ion-icon",9)}function Jt(e,t){if(e&1){let m=it();r(0,"ion-buttons",3)(1,"ion-button",4),d("click",function(i){Y(m);let n=M(2);return Z(n.showProfileMenu(i))}),r(2,"ion-avatar",5),S(3,Gt,1,1,"img",6)(4,Wt,1,0,"ion-icon",7),a()()()}if(e&2){let m=t.ngIf;v(3),I("ngIf",m.picture),v(),I("ngIf",!m.picture)}}function Kt(e,t){if(e&1&&(S(0,Jt,5,2,"ion-buttons",2),j(1,"async")),e&2){let m=M();I("ngIf",w(1,1,m.userSession$))}}var zt=(()=>{let t=class t{constructor(o,i,n,s,x){this.authService=o,this.router=i,this.popoverController=n,this.route=s,this.clubContext=x,Rt({personCircleOutline:Dt,logOutOutline:$t}),this.userSession$=this.authService.userSession$}ngOnInit(){return p(this,null,function*(){try{yield Et.initialize({google:{webClientId:Pt.googleSignInClientId}})}catch(o){console.error("Failed to initialize Social Login:",o)}this.authService.isAuthenticated$.subscribe(o=>p(this,null,function*(){if(o){let i=this.router.url;this.route.queryParams.subscribe(n=>p(this,null,function*(){let s=n.sportsClubId;s&&this.clubContext.setSportsClubId(s),!this.clubContext.getSportsClubId()&&!i.includes("/settings")&&(yield this.router.navigate(["/settings"]))}))}}))})}showProfileMenu(o){return p(this,null,function*(){let i=yield this.popoverController.create({component:Bt,event:o,translucent:!0});yield i.present();let{role:n}=yield i.onWillDismiss();n==="logout"&&(yield this.authService.logout(),yield this.router.navigate(["/login"]))})}};t.\u0275fac=function(i){return new(i||t)(c(h),c(g),c(L),c(ct),c(Ft))},t.\u0275cmp=_({type:t,selectors:[["app-root"]],features:[ot([{provide:k,useClass:R},{provide:st,useClass:Nt,multi:!0}])],decls:5,vars:0,consts:[["userProfile",""],["id","main-content"],["slot","end",4,"ngIf"],["slot","end"],[3,"click"],["slot","icon-only"],[3,"src",4,"ngIf"],["name","person-circle-outline",4,"ngIf"],[3,"src"],["name","person-circle-outline"]],template:function(i,n){i&1&&(r(0,"ion-app"),u(1,"app-menu")(2,"ion-router-outlet",1),a(),S(3,Kt,2,3,"ng-template",null,0,nt))},dependencies:[P,A,T,dt,ft,gt,b,ht,vt,lt,Ht],encapsulation:2});let e=t;return e})();var Vt=(()=>{let t=class t{constructor(o){this.storage=o,this.init()}init(){return p(this,null,function*(){yield this.storage.create()})}};t.\u0275fac=function(i){return new(i||t)(l(O))},t.\u0275mod=et({type:t}),t.\u0275inj=Q({providers:[O],imports:[kt.forRoot({name:"playmate_db",driverOrder:["indexeddb","localstorage"]})]});let e=t;return e})();function Qt(e){return new Lt(e,"./assets/i18n/",".json")}rt(zt,{providers:[{provide:k,useClass:R},xt(),pt(Ot,ut(mt)),at(),Tt(),X(Vt,At.forRoot({loader:{provide:wt,useFactory:Qt,deps:[E]},defaultLanguage:"en"}))]});export{Qt as createTranslateLoader};
