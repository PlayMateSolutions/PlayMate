import{a as Kt}from"./chunk-2QVOD6WD.js";import{a as y}from"./chunk-2O5SH6DD.js";import{a as Pt,c as At}from"./chunk-WQ2WK4SA.js";import{a as Ot,e as kt,f as Jt}from"./chunk-OX3FCXOW.js";import"./chunk-T47TWMLD.js";import{A as Ut,E as Bt,J as Vt,K as $t,L as Ht,N as qt,O as Gt,P as Yt,Q as Xt,a as Tt,d as It,e as Et,i as Wt,j as jt,m as zt,n as Ft,r as Lt,s as Nt,z as Rt}from"./chunk-57T6L74Z.js";import{$ as s,$b as yt,A,Ba as Q,G as $,H,Hb as lt,Ia as Z,Ib as dt,Jb as ht,Kb as gt,Lb as mt,Ma as tt,Na as et,Nb as ut,Pb as pt,Q as u,Qa as nt,R as I,Ra as at,Sa as it,Sb as ft,T as q,X as F,Ya as ot,Yb as bt,Z as w,aa as d,ba as M,bc as Ct,c as P,cb as rt,dc as wt,fa as G,fb as st,gc as Mt,ha as v,hc as Dt,ia as O,ic as St,j as T,kb as ct,qc as xt,ra as b,sa as E,sc as vt,ta as L,va as Y,vc as _t,wa as X,x as V,xa as J,za as K}from"./chunk-LVN3DC7G.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as U,b as B,i as D}from"./chunk-OYAVQN5W.js";var Qt=(()=>{let g=class g{constructor(t,n,e,i){this.http=t,this.authService=n,this.clubContext=e,this.memberService=i,this.apiUrl=Ot.apiUrl,this.attendanceSubject=new P([]),this.analyticsSubject=new P(null),this.loadingSubject=new P(!1),this.lastSyncSubject=new P(null),this.attendance$=this.attendanceSubject.asObservable(),this.analytics$=this.analyticsSubject.asObservable(),this.loading$=this.loadingSubject.asObservable(),this.lastSync$=this.lastSyncSubject.asObservable(),this.attendanceSubject.next([]),this.analyticsSubject.next(null),this.loadingSubject.next(!1),this.lastSyncSubject.next(null),setTimeout(()=>this.loadCachedData(),1e3)}loadCachedData(){return D(this,null,function*(){try{console.log("Loading cached attendance data...");let t=yield y.getAll(),n=yield y.getLastSyncTime();console.log("Cached attendance records:",t.length),t.length>0&&(this.attendanceSubject.next(t),this.calculateAnalytics(t)),this.lastSyncSubject.next(n)}catch(t){console.error("Error loading cached data:",t)}})}initializeData(){return D(this,null,function*(){try{this.loadingSubject.next(!0),yield this.loadCachedData();let t=yield y.getLastSyncTime();(this.attendanceSubject.value.length===0||!t||new Date().getTime()-t.getTime()>5*60*1e3)&&this.syncAttendance().catch(e=>{console.error("Background sync failed:",e)})}catch(t){console.error("Error initializing attendance data:",t)}finally{this.loadingSubject.next(!1)}})}syncAttendance(t=!1){return D(this,null,function*(){var n;try{this.loadingSubject.next(!0);let e=yield this.authService.getAuthToken(),i=this.clubContext.getSportsClubId()||"";console.log("Attendance sync - Token:",e?"Present":"Missing"),console.log("Attendance sync - Club ID:",i);let a={};if(!t){let c=yield y.getLastAttendanceId();c&&(a.lastAttendanceId=c)}let o=new at().set("action","getAttendance").set("sportsClubId",i).set("authorization",e?"Bearer "+e:"");Object.keys(a).length>0&&(o=o.set("payload",JSON.stringify(a)));let S={headers:new nt({"Content-Type":"text/plain;charset=utf-8"}),params:o,responseType:"json",observe:"body"},p=yield this.http.get(this.apiUrl,S).toPromise();if((p==null?void 0:p.status)==="error")throw new Error(((n=p.error)==null?void 0:n.message)||"API returned error status");if((p==null?void 0:p.status)==="success"&&p.data){let c=Array.isArray(p.data)?p.data:[p.data];if(c=yield this.linkWithMemberData(c),t||!(yield y.getLastAttendanceId())?yield y.setAll(c):yield y.addRecords(c),c.length>0){let k=Math.max(...c.map(W=>parseInt(W.id||"0"))).toString();yield y.setLastAttendanceId(k)}yield y.setLastSyncTime(new Date),this.lastSyncSubject.next(new Date);let f=yield y.getAll();this.attendanceSubject.next(f),this.calculateAnalytics(f)}}catch(e){throw console.error("Error syncing attendance:",e),e}finally{this.loadingSubject.next(!1)}})}linkWithMemberData(t){return D(this,null,function*(){try{console.log("Linking attendance records with member data:",t.length);let n=yield new Promise((i,a)=>{let o=setTimeout(()=>{console.warn("Member service timeout, proceeding without member data"),i([])},5e3);this.memberService.getMembers().subscribe({next:m=>{clearTimeout(o),console.log("Members fetched for linking:",m.members.length),i(m.members)},error:m=>{clearTimeout(o),console.error("Error fetching members:",m),i([])}})}),e=new Map(n.map(i=>[i.id,i]));return console.log("Member map created with",e.size,"members"),t.map(i=>{let a=e.get(i.memberId),o=B(U({},i),{memberName:a?`${a.firstName} ${a.lastName}`.trim():"Unknown Member",membershipStatus:i.membershipStatus||"unknown"});return!a&&n.length>0&&console.warn("Member not found for attendance record:",i.memberId),o})}catch(n){return console.error("Error linking member data:",n),t}})}getFilteredAttendance(t){return this.attendance$.pipe(T(n=>this.applyFilters(n,t)))}applyFilters(t,n){let e=[...t];if(n.startDate&&(e=e.filter(i=>new Date(i.date)>=n.startDate)),n.endDate&&(e=e.filter(i=>new Date(i.date)<=n.endDate)),n.memberId&&(e=e.filter(i=>i.memberId===n.memberId)),n.membershipStatus&&n.membershipStatus!=="all"&&(e=e.filter(i=>i.membershipStatus===n.membershipStatus)),n.searchTerm){let i=n.searchTerm.toLowerCase();e=e.filter(a=>{var o,m;return((o=a.memberName)==null?void 0:o.toLowerCase().includes(i))||((m=a.notes)==null?void 0:m.toLowerCase().includes(i))})}return e}calculateAnalytics(t){var R;if(t.length===0){this.analyticsSubject.next(null);return}let n=new Map,e=new Map,i=new Map;t.forEach(r=>{let l=new Date(r.date).toDateString(),_=new Date(r.checkInTime).getHours();n.has(l)||n.set(l,{date:l,totalCheckins:0,activeMembers:0,expiredMembers:0,averageDuration:0,uniqueMembers:0});let x=n.get(l);x.totalCheckins++,r.membershipStatus==="active"?x.activeMembers++:r.membershipStatus==="expired"&&x.expiredMembers++,r.duration&&(x.averageDuration=(x.averageDuration+r.duration)/2),e.has(r.memberId)||e.set(r.memberId,new Set),e.get(r.memberId).add(l),i.set(_,(i.get(_)||0)+1)}),n.forEach((r,l)=>{let _=0;e.forEach(x=>{x.has(l)&&_++}),r.uniqueMembers=_});let a=Array.from(n.values()).sort((r,l)=>new Date(r.date).getTime()-new Date(l.date).getTime()),o=a.map(r=>r.totalCheckins),m=e.size,S=o.reduce((r,l)=>r+l,0)/o.length||0,p=Math.min(...o)||0,c=Math.max(...o)||0,f=t.filter(r=>r.membershipStatus==="active").length,k=t.filter(r=>r.membershipStatus==="expired").length,W=k>0?f/k:f,j=new Map;a.forEach(r=>{let l=new Date(r.date).toLocaleDateString("en-US",{weekday:"long"});j.set(l,(j.get(l)||0)+r.totalCheckins)});let Zt=((R=Array.from(j.entries()).sort((r,l)=>l[1]-r[1])[0])==null?void 0:R[0])||"Monday",N=a.slice(-14),z=N.slice(0,7).reduce((r,l)=>r+l.totalCheckins,0),te=N.slice(7,14).reduce((r,l)=>r+l.totalCheckins,0),ee=z>0?(te-z)/z*100:0,ne=Array.from(i.entries()).map(([r,l])=>({hour:r,count:l})).sort((r,l)=>l.count-r.count).slice(0,5),ae={dailyStats:a,summary:{totalActiveUsers:m,averageDaily:Math.round(S*100)/100,minDaily:p,maxDaily:c,activeVsExpiredRatio:Math.round(W*100)/100,totalAttendanceRecords:t.length},trends:{weeklyGrowth:Math.round(ee*100)/100,mostActiveDay:Zt,peakHours:ne}};this.analyticsSubject.next(ae)}refreshData(){return D(this,null,function*(){yield this.syncAttendance(!0)})}loadData(){return D(this,null,function*(){yield this.initializeData()})}getAttendanceByMember(t){return this.attendance$.pipe(T(n=>n.filter(e=>e.memberId===t)))}getAttendanceByDateRange(t,n){return this.attendance$.pipe(T(e=>e.filter(i=>{let a=new Date(i.date);return a>=t&&a<=n})))}};g.\u0275fac=function(n){return new(n||g)(A(it),A(kt),A(Jt),A(Kt))},g.\u0275prov=V({token:g,factory:g.\u0275fac,providedIn:"root"});let h=g;return h})();function re(h,g){h&1&&M(0,"ion-spinner",19)}function se(h,g){h&1&&M(0,"ion-icon",20)}function ce(h,g){h&1&&(s(0,"div",21),M(1,"ion-spinner",19),s(2,"ion-text",22),b(3,"Loading attendance data..."),d()())}function le(h,g){if(h&1){let C=G();s(0,"div",23)(1,"div",24),v("click",function(){$(C);let n=O();return H(n.navigateToAttendanceDetails())}),s(2,"div",25),M(3,"ion-icon",26),d(),s(4,"div",27),b(5,"Active Users"),d(),s(6,"div",28),b(7),d(),s(8,"div",29),M(9,"ion-icon",30),s(10,"small"),b(11,"View Details"),d()()(),s(12,"div",31)(13,"div",32),M(14,"ion-icon",33),d(),s(15,"div",27),b(16,"Avg Daily"),d(),s(17,"div",28),b(18),K(19,"number"),d()()()}if(h&2){let C=O();u(7),E(C.uniqueMembersCount),u(11),E(Q(19,2,C.averageAttendance,"1.0-1"))}}function de(h,g){if(h&1&&(s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),b(3),d()(),s(4,"ion-card-content")(5,"div",34),M(6,"google-chart",35),d()()()),h&2){let C=O();u(3),E(C.getChartTitle()),u(3),w("type",C.chartType)("data",C.chartData)("columns",C.chartColumns)("options",C.chartOptions)("height",300)}}function he(h,g){if(h&1&&(s(0,"ion-card")(1,"ion-card-content",36),M(2,"ion-icon",37),s(3,"ion-text",22)(4,"h3"),b(5),d(),s(6,"p"),b(7,"There are no attendance records for this period."),d(),s(8,"p"),b(9,"Try changing the date range or refresh the data."),d()()()()),h&2){let C=O();u(5),L("No Data for ",C.getCurrentPeriodText(),"")}}var Ee=(()=>{let g=class g{constructor(t,n,e){this.attendanceService=t,this.toastController=n,this.router=e,this.loading=!0,this.refreshing=!1,this.viewPeriod="weekly",this.currentDate=new Date,this.currentWeekStart=new Date,this.currentMonth=new Date,this.dailyData=[],this.chartData=[],this.chartColumns=["Date","Attendance",{type:"string",role:"tooltip"},{type:"string",role:"annotation"}],this.chartType=Pt.ColumnChart,this.uniqueMembersCount=0,this.averageAttendance=0,this.highestAttendance={day:"",count:0},this.lowestAttendance={day:"",count:0},this.daysWithNoAttendance=0,this.totalAttendanceCount=0,this.expiredMembershipsCount=0,this.hasDataForCurrentPeriod=!1,this.chartOptions={backgroundColor:"transparent",colors:["#4CAF50"],chartArea:{left:60,top:20,width:"85%",height:"75%"},hAxis:{textStyle:{fontSize:12,color:"#666"},gridlines:{color:"transparent"}},vAxis:{textStyle:{fontSize:12,color:"#666"},gridlines:{color:"#e0e0e0",count:5},minValue:0},legend:{position:"none"},animation:{startup:!0,duration:1e3,easing:"out"}},Tt({refresh:Bt,chevronBackOutline:zt,chevronForwardOutline:Ft,peopleOutline:Ut,calendarOutline:jt,trendingUpOutline:Xt,trendingDownOutline:Gt,statsChartOutline:$t,eyeOutline:Nt,analyticsOutline:Et,timeOutline:Ht,people:Rt,calendar:Wt,statsChart:Vt,trendingUp:Yt,trendingDown:qt,eye:Lt,analytics:It}),this.setCurrentWeekStart(),this.currentMonth=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1)}ngOnInit(){this.loadAttendanceData()}loadAttendanceData(){return D(this,null,function*(){try{this.loading=!0,console.log("Loading attendance data from IndexedDB...");let t=yield y.getAll();console.log("Loaded records:",t.length);let n=this.getDateRangeForCurrentView(),e=new Date(n[0]),i=new Date(n[n.length-1]);i.setHours(23,59,59,999);let a=t.filter(o=>{let m=new Date(o.date);return m>=e&&m<=i});this.hasDataForCurrentPeriod=a.length>0,this.dailyData=this.calculateDailyAttendance(t),this.chartData=this.prepareChartData(this.dailyData),this.calculateStatistics(this.dailyData,t),this.updateChartOptions(),console.log("Daily data:",this.dailyData),console.log("Chart data:",this.chartData),console.log("Has data for current period:",this.hasDataForCurrentPeriod)}catch(t){console.error("Error loading attendance data:",t)}finally{this.loading=!1}})}calculateDailyAttendance(t){let n=new Map;t.forEach(a=>{let o=new Date(a.date).toISOString().split("T")[0];n.set(o,(n.get(o)||0)+1)});let e=this.getDateRangeForCurrentView(),i=[];return e.forEach(a=>{let o=n.get(a)||0;i.push({date:a,count:o})}),i}getDateRangeForCurrentView(){let t=[];switch(this.viewPeriod){case"weekly":for(let a=0;a<7;a++){let o=new Date(this.currentWeekStart);o.setDate(this.currentWeekStart.getDate()+a),t.push(o.toISOString().split("T")[0])}break;case"monthly":let n=this.currentMonth.getFullYear(),e=this.currentMonth.getMonth(),i=new Date(n,e+1,0).getDate();for(let a=1;a<=i;a++){let o=new Date(n,e,a);t.push(o.toISOString().split("T")[0])}break;default:for(let a=29;a>=0;a--){let o=new Date(this.currentDate);o.setDate(this.currentDate.getDate()-a),t.push(o.toISOString().split("T")[0])}break}return t}setCurrentWeekStart(){let t=new Date,n=t.getDay(),e=n===0?6:n-1;this.currentWeekStart=new Date(t),this.currentWeekStart.setDate(t.getDate()-e),this.currentWeekStart.setHours(0,0,0,0)}prepareChartData(t){return!t||t.length===0?[]:(t.sort((n,e)=>new Date(n.date).getTime()-new Date(e.date).getTime()),t.map(n=>{let e=n.count||0;return[this.formatDate(n.date),e,`${n.date}: ${e} ${e===1?"person":"people"}`,e.toString()]}))}calculateStatistics(t,n){if(!t||t.length===0){this.uniqueMembersCount=0,this.averageAttendance=0,this.highestAttendance={day:"",count:0},this.lowestAttendance={day:"",count:0},this.daysWithNoAttendance=0,this.totalAttendanceCount=0,this.expiredMembershipsCount=0;return}let e=this.getDateRangeForCurrentView(),i=new Date(e[0]),a=new Date(e[e.length-1]);a.setHours(23,59,59,999);let o=n.filter(c=>{let f=new Date(c.date);return f>=i&&f<=a});this.totalAttendanceCount=t.reduce((c,f)=>c+(f.count||0),0),this.averageAttendance=this.totalAttendanceCount/t.length;let m={day:"",count:0},S={day:"",count:Number.MAX_SAFE_INTEGER};t.forEach(c=>{let f=c.count||0;f>m.count&&(m={day:c.date,count:f}),f<S.count&&(S={day:c.date,count:f})}),this.highestAttendance=m,this.lowestAttendance=S.count===Number.MAX_SAFE_INTEGER?{day:"",count:0}:S,this.daysWithNoAttendance=t.filter(c=>!c.count||c.count===0).length,this.expiredMembershipsCount=o.filter(c=>c.membershipStatus==="expired").length;let p=new Set(o.map(c=>c.memberId));this.uniqueMembersCount=p.size}formatDateForDisplay(t,n=this.viewPeriod){let e=new Date(t);switch(n){case"weekly":return e.toLocaleDateString("en-US",{weekday:"short"});case"monthly":return e.toLocaleDateString("en-US",{day:"numeric"});default:return e.toLocaleDateString("en-US",{weekday:"short"})}}formatDate(t){return this.formatDateForDisplay(t)}refreshAttendance(){return D(this,null,function*(){try{this.refreshing=!0,console.log("Refreshing attendance data..."),yield this.attendanceService.syncAttendance(!1),yield this.loadAttendanceData(),console.log("Attendance data refreshed successfully"),yield(yield this.toastController.create({message:"Attendance data refreshed successfully",duration:3e3,color:"success",position:"top"})).present()}catch(t){console.error("Error refreshing attendance data:",t),yield(yield this.toastController.create({message:"Failed to refresh attendance data",duration:3e3,color:"danger",position:"top"})).present()}finally{this.refreshing=!1}})}onPeriodChange(t){this.viewPeriod=t.detail.value,console.log("Period changed to:",this.viewPeriod),this.viewPeriod==="weekly"?this.setCurrentWeekStart():this.viewPeriod==="monthly"&&(this.currentMonth=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1)),this.loadAttendanceData()}goToPreviousWeek(){this.currentWeekStart.setDate(this.currentWeekStart.getDate()-7),this.loadAttendanceData()}goToNextWeek(){this.currentWeekStart.setDate(this.currentWeekStart.getDate()+7),this.loadAttendanceData()}goToPreviousMonth(){this.currentMonth.setMonth(this.currentMonth.getMonth()-1),this.loadAttendanceData()}goToNextMonth(){this.currentMonth.setMonth(this.currentMonth.getMonth()+1),this.loadAttendanceData()}navigateToAttendanceDetails(){let t=this.getDateRangeForCurrentView(),n=t[0],e=t[t.length-1];this.router.navigate(["/tabs/attendance-details"],{queryParams:{startDate:n,endDate:e,period:this.viewPeriod,periodLabel:this.getCurrentPeriodText(),scrollToDate:n},skipLocationChange:!1})}getCurrentPeriodText(){switch(this.viewPeriod){case"weekly":let t=new Date(this.currentWeekStart);return t.setDate(this.currentWeekStart.getDate()+6),`${this.currentWeekStart.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`;case"monthly":return this.currentMonth.toLocaleDateString("en-US",{year:"numeric",month:"long"});default:return"This Week"}}getChartTitle(){return`${this.viewPeriod.charAt(0).toUpperCase()+this.viewPeriod.slice(1)} Attendance Analytics`}canGoToNextWeek(){let t=new Date(this.currentWeekStart);return t.setDate(this.currentWeekStart.getDate()+7),t<=new Date}canGoToNextMonth(){let t=new Date(this.currentMonth);t.setMonth(this.currentMonth.getMonth()+1);let n=new Date;return t<=new Date(n.getFullYear(),n.getMonth(),1)}updateChartOptions(){let t=this.chartData.length>0?Math.max(...this.chartData.map(n=>n[1]),10)*1.1:10;this.chartOptions={backgroundColor:"transparent",colors:["#4CAF50"],chartArea:{left:60,top:20,width:this.viewPeriod==="monthly"&&this.chartData.length>20?"80%":"85%",height:"75%"},hAxis:{textStyle:{fontSize:12,color:"#666"},gridlines:{color:"transparent"}},vAxis:{textStyle:{fontSize:12,color:"#666"},gridlines:{color:"#e0e0e0",count:5},minValue:0,viewWindow:{min:0,max:t}},legend:{position:"none"},animation:{startup:!0,duration:1e3,easing:"out"},annotations:{textStyle:{fontSize:12,color:"#fff",bold:!0},alwaysOutside:!1,stem:{color:"transparent",length:0}}}}};g.\u0275fac=function(n){return new(n||g)(I(Qt),I(xt),I(ot))},g.\u0275cmp=q({type:g,selectors:[["app-attendance"]],decls:32,vars:12,consts:[[3,"translucent"],["color","primary"],["slot","start"],["slot","end"],[3,"click","disabled"],["name","crescent",4,"ngIf"],["name","refresh","slot","icon-only",4,"ngIf"],["mode","ios",3,"ngModelChange","ionChange","ngModel"],["value","weekly"],["value","monthly"],["fill","clear",3,"click"],["name","chevron-back-outline","slot","icon-only"],["size","small",1,"period-title"],["fill","clear",3,"click","disabled"],["name","chevron-forward-outline","slot","icon-only"],[3,"fullscreen"],["class","loading-container",4,"ngIf"],["class","stats-grid",4,"ngIf"],[4,"ngIf"],["name","crescent"],["name","refresh","slot","icon-only"],[1,"loading-container"],["color","medium"],[1,"stats-grid"],[1,"stat-card",3,"click"],[1,"stat-icon","active-users"],["name","people"],[1,"stat-label"],[1,"stat-value"],[1,"view-details"],["name","chevron-forward-outline","size","small"],[1,"stat-card"],[1,"stat-icon","avg-daily"],["name","calendar"],[2,"display","flex","justify-content","center","align-items","center"],[3,"type","data","columns","options","height"],[1,"no-data"],["name","analytics-outline","size","large","color","medium"]],template:function(n,e){n&1&&(s(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),M(3,"ion-menu-button"),d(),s(4,"ion-title"),b(5,"Attendance Analytics"),d(),s(6,"ion-buttons",3)(7,"ion-button",4),v("click",function(){return e.refreshAttendance()}),F(8,re,1,0,"ion-spinner",5)(9,se,1,0,"ion-icon",6),d()()(),s(10,"ion-toolbar")(11,"ion-segment",7),J("ngModelChange",function(a){return X(e.viewPeriod,a)||(e.viewPeriod=a),a}),v("ionChange",function(a){return e.onPeriodChange(a)}),s(12,"ion-segment-button",8)(13,"ion-label"),b(14,"Weekly"),d()(),s(15,"ion-segment-button",9)(16,"ion-label"),b(17,"Monthly"),d()()()(),s(18,"ion-toolbar")(19,"ion-buttons",2)(20,"ion-button",10),v("click",function(){return e.viewPeriod==="weekly"?e.goToPreviousWeek():e.goToPreviousMonth()}),M(21,"ion-icon",11),d()(),s(22,"ion-title",12),b(23),d(),s(24,"ion-buttons",3)(25,"ion-button",13),v("click",function(){return e.viewPeriod==="weekly"?e.goToNextWeek():e.goToNextMonth()}),M(26,"ion-icon",14),d()()()(),s(27,"ion-content",15),F(28,ce,4,0,"div",16)(29,le,20,5,"div",17)(30,de,7,6,"ion-card",18)(31,he,10,1,"ion-card",18),d()),n&2&&(w("translucent",!0),u(7),w("disabled",e.loading||e.refreshing),u(),w("ngIf",e.refreshing),u(),w("ngIf",!e.refreshing),u(2),Y("ngModel",e.viewPeriod),u(12),L(" ",e.getCurrentPeriodText()," "),u(2),w("disabled",e.viewPeriod==="weekly"?!e.canGoToNextWeek():!e.canGoToNextMonth()),u(2),w("fullscreen",!0),u(),w("ngIf",e.loading),u(),w("ngIf",!e.loading&&e.hasDataForCurrentPeriod),u(),w("ngIf",!e.loading&&e.hasDataForCurrentPeriod),u(),w("ngIf",!e.loading&&!e.hasDataForCurrentPeriod))},dependencies:[et,Z,tt,ct,rt,st,ft,St,Dt,pt,ht,mt,ut,gt,wt,Mt,dt,yt,lt,vt,_t,Ct,bt,At],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;gap:1rem}.period-title[_ngcontent-%COMP%]{text-align:center;font-size:1rem;font-weight:500}.no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;display:flex;flex-direction:column;align-items:center;gap:1rem}.no-data[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:.5rem}.no-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:.5rem}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium-tint);margin:.25rem 0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:12px}.stat-card[_ngcontent-%COMP%]{background-color:var(--ion-card-background);border-radius:8px;padding:16px;display:flex;flex-direction:column;align-items:flex-start;box-shadow:0 4px 6px #0000001a;position:relative;transition:background-color .2s ease}.stat-card[_ngcontent-%COMP%]:active{background-color:#0000000d}.view-details[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;display:flex;align-items:center;font-size:12px;color:var(--ion-color-medium)}.view-details[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:4px}.stat-icon[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;margin-bottom:12px}.stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#fff}.stat-icon.active-users[_ngcontent-%COMP%]{background-color:#e53935}.stat-icon.avg-daily[_ngcontent-%COMP%]{background-color:#3949ab}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium);margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--ion-color-dark)}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-bottom:4px}.stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#fff}.insights-section[_ngcontent-%COMP%]{padding:0 12px;margin-top:12px}.insights-section[_ngcontent-%COMP%]   .insights-title[_ngcontent-%COMP%]{font-size:16px;color:#fff;display:flex;align-items:center;margin:0 0 12px}.insights-section[_ngcontent-%COMP%]   .insights-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]{background-color:#1e1e1e;border-radius:8px;padding:12px 16px;margin-bottom:12px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:6px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   ion-icon.negative[_ngcontent-%COMP%]{color:#e53935}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   .insight-title[_ngcontent-%COMP%]{font-size:14px;color:#fff;flex-grow:1}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   .insight-value[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-content[_ngcontent-%COMP%]   .insight-value.negative[_ngcontent-%COMP%]{color:#e53935}.insights-section[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]   .insight-description[_ngcontent-%COMP%]{font-size:13px;color:#888}.bottom-tabs[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:#1a1a1a;padding:10px 0;position:fixed;bottom:0;left:0;right:0;z-index:10;border-top:1px solid #333333}.bottom-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.bottom-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#888}.bottom-tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{font-size:10px;margin-top:4px;color:#888}.bottom-tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#e53935}.bottom-tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{color:#e53935}"]});let h=g;return h})();export{Ee as AttendancePage};
