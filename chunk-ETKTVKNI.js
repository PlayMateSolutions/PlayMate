import{a as ne}from"./chunk-6J3BKTYG.js";import{a as ie}from"./chunk-QJYZMGHO.js";import{a as te}from"./chunk-2JW2NRRJ.js";import"./chunk-UERSP4CJ.js";import"./chunk-T47TWMLD.js";import"./chunk-P5NOT2UF.js";import"./chunk-4D53AV6Y.js";import{a as X,n as Z,p as ee}from"./chunk-OMMW57FB.js";import{$ as d,$a as A,$b as L,Ac as K,Ba as _,Ca as T,Da as x,Dc as Q,Fa as C,H as P,I as O,Ib as B,Ka as I,La as M,Ma as w,Na as F,Ob as z,Pb as G,Qa as N,Qb as Y,R as r,Ra as j,S as h,Sa as E,U as S,Vb as $,Yb as J,Z as p,ba as o,ca as n,cc as R,da as f,dc as V,ha as k,hc as H,ic as U,ja as b,ka as u,pc as W,qc as q,ta as c,ua as v,va as g,wa as y}from"./chunk-7E5XZK2A.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-OYAVQN5W.js";var me=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ce=(t,l,e,i)=>({"event-day":t,empty:l,today:e,"payment-day":i});function de(t,l){if(t&1&&(o(0,"div",12),c(1),n()),t&2){let e=l.$implicit;r(),g(" ",e," ")}}function se(t,l){if(t&1&&(o(0,"span"),c(1),n()),t&2){let e=u().$implicit;r(),v(e.getDate())}}function pe(t,l){if(t&1&&(o(0,"div",15),p(1,se,2,1,"span",16),n()),t&2){let e=l.$implicit,i=u(2);d("ngClass",T(2,ce,i.isEventDay(e),!e,i.isToday(e),i.isPaymentDay(e))),r(),d("ngIf",e)}}function ge(t,l){if(t&1&&(o(0,"div",13),p(1,pe,2,7,"div",14),n()),t&2){let e=l.$implicit;r(),d("ngForOf",e)}}X({chevronBackOutline:Z,chevronForwardOutline:ee});var oe=(()=>{let l=class l{constructor(){this.events=[],this.paymentEvents=[],this.month=new Date().getMonth(),this.year=new Date().getFullYear(),this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"]}get weeks(){let i=new Date(this.year,this.month,1),a=new Date(this.year,this.month+1,0),m=[],s=Array(i.getDay()).fill(null);for(let D=1;D<=a.getDate();D++)s.push(new Date(this.year,this.month,D)),s.length===7&&(m.push(s),s=[]);if(s.length){for(;s.length<7;)s.push(null);m.push(s)}return m}get totalDaysInMonth(){return new Date(this.year,this.month+1,0).getDate()}get presentDays(){return this.events.filter(i=>{let a=new Date(i);return a.getFullYear()===this.year&&a.getMonth()===this.month}).length}isEventDay(i){if(!i)return!1;let a=i.toISOString().slice(0,10);return this.events.includes(a)}isPaymentDay(i){if(!i)return!1;let a=i.toISOString().slice(0,10);return this.paymentEvents.includes(a)}isToday(i){if(!i)return!1;let a=new Date;return i.getDate()===a.getDate()&&i.getMonth()===a.getMonth()&&i.getFullYear()===a.getFullYear()}prevMonth(){this.month===0?(this.month=11,this.year--):this.month--}nextMonth(){this.month===11?(this.month=0,this.year++):this.month++}};l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=S({type:l,selectors:[["app-calendar-grid"]],inputs:{events:"events",paymentEvents:"paymentEvents",month:"month",year:"year"},decls:14,vars:7,consts:[[1,"calendar-grid"],[1,"calendar-title",2,"display","flex","align-items","center","justify-content","center","gap","0.5rem","margin-bottom","0.5rem"],["aria-label","Previous month",1,"calendar-nav-btn",3,"click"],["name","chevron-back-outline",2,"font-size","1.25rem"],[2,"flex","1","text-align","center","font-weight","bold"],["aria-label","Next month",1,"calendar-nav-btn",3,"click"],["name","chevron-forward-outline",2,"font-size","1.25rem"],[1,"calendar-summary",2,"text-align","center","margin-bottom","0.5rem","color","var(--ion-color-primary)","font-weight","500"],[1,"calendar-header"],["class","calendar-cell calendar-header-cell",4,"ngFor","ngForOf"],[1,"calendar-body"],["class","calendar-row",4,"ngFor","ngForOf"],[1,"calendar-cell","calendar-header-cell"],[1,"calendar-row"],["class","calendar-cell",3,"ngClass",4,"ngFor","ngForOf"],[1,"calendar-cell",3,"ngClass"],[4,"ngIf"]],template:function(a,m){a&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return m.prevMonth()}),f(3,"ion-icon",3),n(),o(4,"span",4),c(5),n(),o(6,"button",5),b("click",function(){return m.nextMonth()}),f(7,"ion-icon",6),n()(),o(8,"div",7),c(9),n(),o(10,"div",8),p(11,de,2,1,"div",9),n(),o(12,"div",10),p(13,ge,2,1,"div",11),n()()),a&2&&(r(5),y("",m.monthNames[m.month]," ",m.year,""),r(4),y(" Total Present: ",m.presentDays," / ",m.totalDaysInMonth," days "),r(2),d("ngForOf",_(6,me)),r(2),d("ngForOf",m.weeks))},dependencies:[E,I,M,w,K],styles:[".calendar-grid[_ngcontent-%COMP%]{width:100%;max-width:350px;margin:0 auto 1.5rem;background:var(--ion-card-background);border-radius:16px;box-shadow:0 2px 8px rgba(var(--ion-color-primary-rgb),.08),0 1.5px 4px rgba(var(--ion-color-primary-rgb),.06);padding:1rem .5rem 1.5rem;color:var(--ion-card-color)}.calendar-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:500;color:var(--ion-text-color);letter-spacing:.01em;margin-bottom:.5rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.calendar-nav-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--ion-color-primary);font-size:1.5rem;cursor:pointer;padding:0 .5rem;border-radius:50%;transition:background .2s;height:32px;width:32px;display:flex;align-items:center;justify-content:center}.calendar-nav-btn[_ngcontent-%COMP%]:hover, .calendar-nav-btn[_ngcontent-%COMP%]:focus{background:var(--ion-color-primary-tint);outline:none}.calendar-header[_ngcontent-%COMP%], .calendar-row[_ngcontent-%COMP%]{display:flex}.calendar-cell[_ngcontent-%COMP%]{flex:1 1 0;height:40px;display:flex;align-items:center;justify-content:center;font-size:1em;background:var(--ion-card-background);color:var(--ion-card-color);margin:2px;border-radius:50%;transition:background .2s,color .2s,box-shadow .2s;position:relative}.calendar-header-cell[_ngcontent-%COMP%]{font-weight:600;background:var(--ion-segment-background);color:var(--ion-segment-color);border-radius:0;border-bottom:1px solid var(--ion-item-border-color);margin:0}.event-day[_ngcontent-%COMP%]{background:var(--ion-card-background);color:var(--ion-color-primary)}.event-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;line-height:32px;border-radius:50%;background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);font-weight:600;box-shadow:0 2px 6px rgba(var(--ion-color-primary-rgb),.08);margin:auto}.empty[_ngcontent-%COMP%]{background:transparent;border:none;box-shadow:none}.calendar-cell[_ngcontent-%COMP%]:not(.empty):hover{background:var(--ion-color-primary-tint);color:var(--ion-color-primary);cursor:pointer}.today[_ngcontent-%COMP%]{border:none;background:transparent;color:var(--ion-color-primary);font-weight:700}.today[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;line-height:32px;border-radius:50%;border:2px solid var(--ion-color-primary);background:var(--ion-color-light);color:var(--ion-color-primary);font-weight:700;box-sizing:border-box}.today.event-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--ion-color-primary-shade);border:2px solid var(--ion-color-light);color:var(--ion-color-primary-contrast)}.payment-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;line-height:32px;border-radius:50%;background:#2dd36f!important;color:#fff!important;font-weight:700;box-shadow:0 2px 6px #2dd36f1f;margin:auto;border:2px solid #2dd36f}.payment-day.today[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:2px solid #fff;background:#20ba5a!important}"]});let t=l;return t})();var ue=()=>({background:"#2dd36f",color:"#fff","border-radius":"8px",padding:"2px 10px","font-weight":"bold"}),fe=()=>({});function ve(t,l){if(t&1&&(o(0,"div")(1,"h3",14),c(2,"Attendance"),n(),f(3,"app-calendar-grid",15),n()),t&2){let e=u(2);r(3),d("events",e.attendanceDates)("paymentEvents",e.paymentDates)}}function he(t,l){if(t&1&&(o(0,"div",23),c(1),n()),t&2){let e=u().$implicit;r(),v(e.notes)}}function be(t,l){if(t&1&&(o(0,"ion-item")(1,"ion-label")(2,"div",18),c(3),x(4,"number"),o(5,"span",19),c(6),n()(),o(7,"div",20),c(8),x(9,"date"),n(),p(10,he,2,1,"div",21),n(),o(11,"ion-note",22),c(12),n()()),t&2){let e=l.$implicit;r(3),g("\u20B9",C(4,7,e.amount,"1.0-0")," "),r(3),v(e.paymentType),r(2),v(C(9,10,e.date,"mediumDate")),r(2),d("ngIf",e.notes),r(),d("color",e.status==="Paid"?"success":"warning")("ngStyle",e.status==="Paid"?_(13,ue):_(14,fe)),r(),g(" ",e.status," ")}}function ye(t,l){if(t&1&&(o(0,"ion-list"),p(1,be,13,15,"ion-item",17),n()),t&2){let e=u(3);r(),d("ngForOf",e.payments)}}function _e(t,l){t&1&&(o(0,"div",24)(1,"ion-note",25),c(2,"No payments found for this member."),n()())}function xe(t,l){if(t&1&&(o(0,"div")(1,"h3",14),c(2,"Payments"),n(),p(3,ye,2,1,"ion-list",3)(4,_e,3,0,"div",16),n()),t&2){let e=u(2);r(3),d("ngIf",e.payments.length>0),r(),d("ngIf",e.payments.length===0)}}function Ce(t,l){if(t&1){let e=k();o(0,"ion-content")(1,"ion-card",4)(2,"ion-card-content",5)(3,"div",6)(4,"div",7),c(5),n(),o(6,"div",8)(7,"div",9)(8,"strong"),c(9),n(),o(10,"small",10),c(11),n()(),o(12,"div"),c(13),n(),o(14,"div"),c(15),n(),o(16,"div"),c(17),x(18,"date"),n(),o(19,"div"),c(20),x(21,"date"),n()()()()(),o(22,"ion-segment",11),b("ionChange",function(a){P(e);let m=u();return O(m.onTabChange(a))}),o(23,"ion-segment-button",12)(24,"ion-label"),c(25,"Attendance"),n()(),o(26,"ion-segment-button",13)(27,"ion-label"),c(28,"Payments"),n()()(),p(29,ve,4,2,"div",3)(30,xe,5,2,"div",3),n()}if(t&2){let e=u();r(),d("ngClass",e.member.status?e.member.status.toLowerCase():""),r(4),g(" ",e.member.firstName?e.member.firstName.charAt(0).toUpperCase():"?"," "),r(4),y("",e.member.firstName," ",e.member.lastName,""),r(2),g("ID: ",e.member.id,""),r(2),g("Phone: ",e.member.phone||"N/A",""),r(2),g("Status: ",e.member.status||"N/A",""),r(2),g("Joined: ",e.member.joinDate?C(18,11,e.member.joinDate,"mediumDate"):"N/A",""),r(3),g("Expiry: ",e.member.expiryDate?C(21,14,e.member.expiryDate,"mediumDate"):"N/A",""),r(9),d("ngIf",e.selectedTab==="attendance"),r(),d("ngIf",e.selectedTab==="payments")}}function De(t,l){t&1&&(o(0,"ion-content")(1,"ion-card")(2,"ion-card-content")(3,"div",26),c(4,"Member not found."),n()()()())}var ae=(()=>{let l=class l{constructor(i,a,m,s){this.route=i,this.memberService=a,this.attendanceService=m,this.paymentService=s,this.member=null,this.currentMonth=new Date().getMonth(),this.currentYear=new Date().getFullYear(),this.attendanceDates=[],this.selectedTab="attendance",this.payments=[],this.paymentDates=[]}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.memberService.getMembers().subscribe(a=>{this.member=a.members.find(m=>String(m.id)===String(i))||null}),this.attendanceService.getAttendanceByMember(i).subscribe(a=>{this.attendanceDates=a.map(m=>new Date(m.date).toISOString().slice(0,10))}),this.paymentSub=this.paymentService.getPaymentsByMember(i).subscribe(a=>{this.payments=a.sort((m,s)=>new Date(s.date).getTime()-new Date(m.date).getTime()),this.paymentDates=a.map(m=>new Date(m.date).toISOString().slice(0,10))}))}ngOnDestroy(){this.paymentSub&&this.paymentSub.unsubscribe()}onTabChange(i){this.selectedTab=i.detail.value}};l.\u0275fac=function(a){return new(a||l)(h(A),h(te),h(ne),h(ie))},l.\u0275cmp=S({type:l,selectors:[["app-member-detail"]],decls:8,vars:2,consts:[["color","primary"],["slot","start"],["defaultHref","/tabs/members"],[4,"ngIf"],[1,"member-detail-card",3,"ngClass"],[1,"card-content"],[1,"member-info-row",2,"display","flex","align-items","center"],[1,"member-avatar",2,"width","48px","height","48px","border-radius","50%","background","#3880ff","color","#fff","display","flex","align-items","center","justify-content","center","font-size","1.5em","font-weight","bold","margin-right","16px"],[1,"member-info",2,"flex","1"],[1,"member-name"],[1,"member-id"],["value","attendance",2,"margin","1.5rem 0 1rem 0",3,"ionChange"],["value","attendance"],["value","payments"],[2,"margin-bottom","0.5rem"],[3,"events","paymentEvents"],["class","ion-text-center ion-padding",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"font-weight","600"],[2,"font-size","0.9em","color","var(--ion-color-medium)"],[2,"font-size","0.95em","color","var(--ion-color-medium)"],["style","font-size:0.9em; color:var(--ion-color-tertiary);",4,"ngIf"],["slot","end",3,"color","ngStyle"],[2,"font-size","0.9em","color","var(--ion-color-tertiary)"],[1,"ion-text-center","ion-padding"],["color","medium"],[1,"ion-text-danger"]],template:function(a,m){a&1&&(o(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),f(3,"ion-back-button",2),n(),o(4,"ion-title"),c(5,"Member Details"),n()()(),p(6,Ce,31,17,"ion-content",3)(7,De,5,0,"ion-content",3)),a&2&&(r(6),d("ngIf",m.member),r(),d("ngIf",!m.member))},dependencies:[E,I,M,w,F,j,N,J,q,z,B,W,$,G,Y,Q,U,R,V,L,H,oe],encapsulation:2});let t=l;return t})();var ze=[{path:"",component:ae}];export{ze as MEMBER_DETAIL_ROUTES};
