import{a as W}from"./chunk-BATVDFPN.js";import"./chunk-ISNHLLCJ.js";import"./chunk-CYSX34QY.js";import"./chunk-T47TWMLD.js";import{$b as U,Ba as u,Ca as P,Da as h,Fb as k,G as I,H as b,Ja as w,Jb as F,Ka as L,Lb as N,Ma as T,Mb as Q,Na as D,Nb as z,Oa as B,Pa as $,Q as a,R as x,Sb as G,T as C,Vb as H,Y as g,Yb as V,Zb as A,_ as p,aa as n,ac as j,ba as i,ca as S,dc as K,ga as O,ia as v,ja as f,lc as q,mc as J,sa as c,ta as M,ua as _,va as E,yc as R}from"./chunk-SZXUWVBX.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-OYAVQN5W.js";function X(e,r){if(e&1&&(n(0,"ion-badge",18),c(1),i()),e&2){let t=f().$implicit;a(),_(" ",t.status," ")}}function Y(e,r){if(e&1){let t=O();n(0,"ion-item",13),v("click",function(){let m=I(t).$implicit,o=f(3);return b(o.showPaymentDetails(m))}),n(1,"ion-label")(2,"h2"),c(3),n(4,"ion-note",14),c(5),i()(),n(6,"ion-note",15),c(7),u(8,"date"),g(9,X,2,1,"ion-badge",16),i()(),n(10,"ion-note",17),c(11),u(12,"number"),i()()}if(e&2){let t=r.$implicit;a(3),_("",t.memberName||"Unknown Member"," "),a(2),_("#",t.memberId,""),a(2),E(" ",h(8,6,t.date,"mediumDate")," \xB7 ",t.paymentType," "),a(2),p("ngIf",t.status!=="active"),a(2),_(" \u20B9",h(12,9,t.amount,"1.0-0")," ")}}function Z(e,r){if(e&1&&(n(0,"div",8)(1,"ion-item-divider",9)(2,"ion-label"),c(3),i(),n(4,"ion-note",10),c(5),u(6,"number"),i()(),n(7,"ion-list",11),g(8,Y,13,12,"ion-item",12),i()()),e&2){let t=r.$implicit;a(3),M(t.formattedDate),a(2),_("\u20B9",h(6,3,t.total,"1.0-0"),""),a(3),p("ngForOf",t.payments)}}function ee(e,r){if(e&1&&(n(0,"div",6),g(1,Z,9,6,"div",7),i()),e&2){let t=f();a(),p("ngForOf",t.displayedGroups)}}function te(e,r){e&1&&(n(0,"p"),c(1,"There are no payment records."),i())}function ne(e,r){e&1&&(n(0,"p"),c(1,"No payments match your search criteria."),i())}function ie(e,r){if(e&1&&(n(0,"ion-card",19)(1,"ion-card-content",20)(2,"ion-label",15)(3,"h2"),c(4,"No Payments Found"),i(),g(5,te,2,0,"p",21)(6,ne,2,0,"p",21),i()()()),e&2){let t=f();a(5),p("ngIf",!t.searchQuery),a(),p("ngIf",t.searchQuery)}}var ce=(()=>{let r=class r{constructor(s){this.paymentService=s,this.loading$=this.paymentService.loading$,this.displayedGroups=[],this.searchQuery=""}ngOnInit(){this.paymentService.payments$.subscribe(s=>{s&&this.processPayments(s)}),this.paymentService.loadData().catch(s=>{console.error("Error initializing payments:",s)})}processPayments(s){let m=new Map;s.forEach(o=>{let d=new Date(o.date),l=d.toISOString().substring(0,7);m.has(l)||m.set(l,{month:l,formattedDate:d.toLocaleDateString("en-US",{month:"long",year:"numeric"}),payments:[],total:0});let y=m.get(l);y.payments.push(o),y.total+=o.amount}),this.displayedGroups=Array.from(m.values()).sort((o,d)=>d.month.localeCompare(o.month))}onSearchChange(s){var m;this.searchQuery=((m=s.detail.value)==null?void 0:m.toLowerCase())||"",this.paymentService.payments$.subscribe(o=>{if(o){let d=o.filter(l=>{var y;return((y=l.memberName)==null?void 0:y.toLowerCase().includes(this.searchQuery))||l.memberId.toLowerCase().includes(this.searchQuery)||l.paymentType.toLowerCase().includes(this.searchQuery)});this.processPayments(d)}})}showPaymentDetails(s){console.log("Show payment details:",s)}};r.\u0275fac=function(m){return new(m||r)(x(W))},r.\u0275cmp=C({type:r,selectors:[["app-payments-list"]],decls:13,vars:7,consts:[["color","primary"],["slot","start"],["defaultHref","/tabs/payments"],["placeholder","Search payments",3,"ionInput","debounce"],["class","payment-list",4,"ngIf"],["class","no-data-card",4,"ngIf"],[1,"payment-list"],["class","date-group",4,"ngFor","ngForOf"],[1,"date-group"],["sticky","true","color","light"],["slot","end"],["lines","full"],["class","payment-item",3,"click",4,"ngFor","ngForOf"],[1,"payment-item",3,"click"],["color","medium",1,"id-note"],["color","medium"],["color","danger","class","status-badge",4,"ngIf"],["slot","end","color","success",1,"amount-note"],["color","danger",1,"status-badge"],[1,"no-data-card"],[1,"ion-text-center"],[4,"ngIf"]],template:function(m,o){m&1&&(n(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),S(3,"ion-back-button",2),i(),n(4,"ion-title"),c(5,"Payment History"),i()(),n(6,"ion-toolbar")(7,"ion-searchbar",3),v("ionInput",function(l){return o.onSearchChange(l)}),i()()(),n(8,"ion-content"),g(9,ee,2,1,"div",4),u(10,"async"),g(11,ie,7,2,"ion-card",5),u(12,"async"),i()),m&2&&(a(7),p("debounce",500),a(2),p("ngIf",!P(10,3,o.loading$)&&o.displayedGroups.length>0),a(2),p("ngIf",!P(12,5,o.loading$)&&o.displayedGroups.length===0))},dependencies:[$,w,L,T,B,D,H,J,q,G,j,V,U,Q,z,F,K,N,k,R,A],styles:[".payment-list[_ngcontent-%COMP%]{margin-top:1rem}.date-group[_ngcontent-%COMP%]   ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);font-weight:500}.payment-item[_ngcontent-%COMP%]   .id-note[_ngcontent-%COMP%]{font-size:.8em;margin-left:.5rem}.payment-item[_ngcontent-%COMP%]   .amount-note[_ngcontent-%COMP%]{font-size:1.1em;font-weight:500}.payment-item[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{margin-left:.5rem;font-size:.7em}.no-data-card[_ngcontent-%COMP%]{margin:1rem;text-align:center}.no-data-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:.5rem}.no-data-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium)}"]});let e=r;return e})();export{ce as PaymentsListPage};
