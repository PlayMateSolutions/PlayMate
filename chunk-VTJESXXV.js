import{e as X,f as Y}from"./chunk-PPFNTUBO.js";import"./chunk-T47TWMLD.js";import{a as Z}from"./chunk-4D53AV6Y.js";import{$b as U,Ac as K,Cc as Q,Ib as T,Ka as E,Kb as D,Lb as L,P as f,Pa as M,Q as l,R as g,Sb as B,T as _,Vb as A,Y as v,Yb as N,Zb as W,_ as c,_a as P,_b as j,aa as e,ac as F,ba as t,ca as p,cc as G,dc as O,fb as k,fc as z,ia as m,ib as w,ja as y,lc as H,mc as R,nb as x,sa as n,ta as S,uc as V,wa as I,wc as q,xa as b,xc as J,ya as C}from"./chunk-SZXUWVBX.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{i as h}from"./chunk-OYAVQN5W.js";function ee(d,u){if(d&1&&(e(0,"ion-avatar",1),p(1,"img",15),t()),d&2){let $=y();l(),c("src",$.userPicture,f)}}var ge=(()=>{let u=class u{constructor(o,a,i,s){this.clubContext=o,this.toastCtrl=a,this.router=i,this.authService=s,this.sportsClubId="",this.hasChanges=!1,this.darkMode=!1,this.language="en",this.userEmail="",this.userName="",this.userPicture="",this.darkMode=document.body.classList.contains("dark-theme"),this.language=localStorage.getItem("language")||"en"}ngOnInit(){let o=this.clubContext.getSportsClubId();this.sportsClubId=o||"",this.loadUserInfo()}loadUserInfo(){this.authService.userSession$.subscribe(o=>{o&&(this.userEmail=o.email,this.userName=o.name,this.userPicture=o.picture||"")})}settingsChanged(){this.hasChanges=!0}saveSettings(){return h(this,null,function*(){this.sportsClubId.trim()?(this.clubContext.setSportsClubId(this.sportsClubId.trim()),yield(yield this.toastCtrl.create({message:"Settings saved successfully!",duration:1500,color:"success"})).present(),this.hasChanges=!1):(yield this.toastCtrl.create({message:"Please enter a valid Sports Club ID.",duration:1500,color:"danger"})).present()})}toggleDarkMode(){document.body.classList.toggle("dark-theme",this.darkMode),this.clubContext.setDarkMode(this.darkMode)}changeLanguage(){this.clubContext.setLanguage(this.language)}logout(){return h(this,null,function*(){if(window.confirm("Are you sure you want to logout? This will delete all your local PlayMate data."))try{yield this.authService.logout();try{yield Z.deleteDatabase(),console.log("PlayMateDB deleted successfully")}catch(a){console.error("Error deleting PlayMateDB:",a)}this.clubContext.clear(),yield this.router.navigate(["/login"],{replaceUrl:!0})}catch(a){console.error("Logout error:",a),yield(yield this.toastCtrl.create({message:"Error during logout. Please try again.",duration:2e3,color:"danger"})).present()}})}};u.\u0275fac=function(a){return new(a||u)(g(Y),g(V),g(P),g(X))},u.\u0275cmp=_({type:u,selectors:[["app-settings"]],decls:63,vars:7,consts:[["color","primary"],["slot","start"],["slot","end"],[3,"click","disabled"],["slot","start","name","save-outline"],[1,"ion-padding"],["position","stacked"],["placeholder","Enter Sports Club ID","type","text",3,"ionInput","value"],[3,"ngModelChange","ionChange","ngModel"],["value","en"],["value","ta"],["lines","none"],["slot","start",4,"ngIf"],["slot","end","fill","clear","color","danger",3,"click"],["slot","start","name","log-out-outline"],["alt","Profile Picture",3,"src"]],template:function(a,i){a&1&&(e(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),p(3,"ion-menu-button"),t(),e(4,"ion-title"),n(5,"Settings"),t(),e(6,"ion-buttons",2)(7,"ion-button",3),m("click",function(){return i.saveSettings()}),p(8,"ion-icon",4),n(9," Save "),t()()()(),e(10,"ion-content",5)(11,"ion-list")(12,"ion-item-group")(13,"ion-item-divider")(14,"ion-label"),n(15,"Club Settings"),t()(),e(16,"ion-item")(17,"ion-label",6),n(18,"Sports Club ID"),t(),e(19,"ion-input",7),m("ionInput",function(r){return i.sportsClubId=r.target.value,i.settingsChanged()}),t(),e(20,"ion-note"),n(21,"This ID is used to identify your club in the system"),t()()(),e(22,"ion-item-group")(23,"ion-item-divider")(24,"ion-label"),n(25,"App Settings"),t()(),e(26,"ion-item")(27,"ion-label"),n(28,"Dark Mode"),t(),e(29,"ion-toggle",8),C("ngModelChange",function(r){return b(i.darkMode,r)||(i.darkMode=r),r}),m("ionChange",function(){return i.toggleDarkMode()}),t()(),e(30,"ion-item")(31,"ion-label"),n(32,"Language"),t(),e(33,"ion-select",8),C("ngModelChange",function(r){return b(i.language,r)||(i.language=r),r}),m("ionChange",function(){return i.changeLanguage()}),e(34,"ion-select-option",9),n(35,"English"),t(),e(36,"ion-select-option",10),n(37,"Tamil"),t()()()(),e(38,"ion-item-group")(39,"ion-item-divider")(40,"ion-label"),n(41,"Account"),t()(),e(42,"ion-item",11),v(43,ee,2,1,"ion-avatar",12),e(44,"ion-label")(45,"h2"),n(46),t(),e(47,"p"),n(48),t(),e(49,"p"),n(50,"Google Account"),t()(),e(51,"ion-button",13),m("click",function(){return i.logout()}),p(52,"ion-icon",14),n(53," Logout "),t()()(),e(54,"ion-item-group")(55,"ion-item-divider")(56,"ion-label"),n(57,"About"),t()(),e(58,"ion-item")(59,"ion-label"),n(60,"Version"),t(),e(61,"ion-note",2),n(62,"1.0.0"),t()()()()()),a&2&&(l(7),c("disabled",!i.hasChanges),l(12),c("value",i.sportsClubId),l(10),I("ngModel",i.darkMode),l(4),I("ngModel",i.language),l(10),c("ngIf",i.userPicture),l(3),S(i.userName),l(2),S(i.userEmail))},dependencies:[M,E,x,k,w,A,R,L,G,H,D,q,B,F,j,W,N,U,J,O,Q,K,z,T],encapsulation:2});let d=u;return d})();export{ge as SettingsPage};
