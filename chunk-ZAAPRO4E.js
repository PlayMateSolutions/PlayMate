import{a as N}from"./chunk-CDFIM2MY.js";import{a as le}from"./chunk-YKBKDEYA.js";import{a as ce}from"./chunk-Q7QXYW3J.js";import{a as ae}from"./chunk-SWDBMSAS.js";import"./chunk-UWHUA5XG.js";import"./chunk-4CL3V5QY.js";import"./chunk-ACDW2MD6.js";import"./chunk-HLDYDQ4G.js";import"./chunk-T47TWMLD.js";import{Cc as O,Da as x,Ea as j,Fa as C,Fc as te,Ha as w,I,J as M,Jc as T,Kb as V,Ma as S,Na as P,Oa as E,Pa as B,Pb as Y,Qb as J,Rb as L,S as a,Sa as z,Sb as W,T as _,Ta as $,Ua as k,Uc as ne,V as D,Xb as R,Xc as ie,Zc as oe,_ as g,_b as U,aa as s,ba as F,bb as G,bc as H,da as o,ea as r,ec as Z,fa as f,fc as q,id as re,ja as A,jc as K,kc as Q,la as h,ma as p,rc as X,sc as ee,va as m,wa as b,xa as u,ya as y}from"./chunk-CCDMTYGH.js";import"./chunk-GRX4ZZSO.js";import"./chunk-7KGURMOZ.js";import"./chunk-Y2YV2HED.js";import"./chunk-EDCKRRWH.js";import"./chunk-SPCCATGZ.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-D5MTWDX2.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-OYAVQN5W.js";var ge=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ue=(i,l,e,n)=>({"event-day":i,empty:l,today:e,"payment-day":n});function fe(i,l){if(i&1&&(o(0,"div",12),m(1),r()),i&2){let e=l.$implicit;a(),u(" ",e," ")}}function he(i,l){if(i&1&&(o(0,"span"),m(1),r()),i&2){let e=p().$implicit;a(),b(e.getDate())}}function be(i,l){if(i&1&&(o(0,"div",15),g(1,he,2,1,"span",16),r()),i&2){let e=l.$implicit,n=p(2);s("ngClass",j(2,ue,n.isEventDay(e),!e,n.isToday(e),n.isPaymentDay(e))),a(),s("ngIf",e)}}function ve(i,l){if(i&1&&(o(0,"div",13),g(1,be,2,7,"div",14),r()),i&2){let e=l.$implicit;a(),s("ngForOf",e)}}T({chevronBackOutline:ie,chevronForwardOutline:oe});var me=(()=>{let l=class l{constructor(){this.events=[],this.paymentEvents=[],this.month=new Date().getMonth(),this.year=new Date().getFullYear(),this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"]}get weeks(){let n=new Date(this.year,this.month,1),t=new Date(this.year,this.month+1,0),c=[],d=Array(n.getDay()).fill(null);for(let v=1;v<=t.getDate();v++)d.push(new Date(this.year,this.month,v)),d.length===7&&(c.push(d),d=[]);if(d.length){for(;d.length<7;)d.push(null);c.push(d)}return c}get totalDaysInMonth(){return new Date(this.year,this.month+1,0).getDate()}get presentDays(){return this.events.filter(n=>{let t=new Date(n);return t.getFullYear()===this.year&&t.getMonth()===this.month}).length}isEventDay(n){if(!n)return!1;let t=n.toISOString().slice(0,10);return this.events.includes(t)}isPaymentDay(n){if(!n)return!1;let t=n.toISOString().slice(0,10);return this.paymentEvents.includes(t)}isToday(n){if(!n)return!1;let t=new Date;return n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()}prevMonth(){this.month===0?(this.month=11,this.year--):this.month--}nextMonth(){this.month===11?(this.month=0,this.year++):this.month++}};l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=D({type:l,selectors:[["app-calendar-grid"]],inputs:{events:"events",paymentEvents:"paymentEvents",month:"month",year:"year"},decls:14,vars:7,consts:[[1,"calendar-grid"],[1,"calendar-title",2,"display","flex","align-items","center","justify-content","center","gap","0.5rem","margin-bottom","0.5rem"],["aria-label","Previous month",1,"calendar-nav-btn",3,"click"],["name","chevron-back-outline",2,"font-size","1.25rem"],[2,"flex","1","text-align","center","font-weight","bold"],["aria-label","Next month",1,"calendar-nav-btn",3,"click"],["name","chevron-forward-outline",2,"font-size","1.25rem"],[1,"calendar-summary",2,"text-align","center","margin-bottom","0.5rem","color","var(--ion-color-primary)","font-weight","500"],[1,"calendar-header"],["class","calendar-cell calendar-header-cell",4,"ngFor","ngForOf"],[1,"calendar-body"],["class","calendar-row",4,"ngFor","ngForOf"],[1,"calendar-cell","calendar-header-cell"],[1,"calendar-row"],["class","calendar-cell",3,"ngClass",4,"ngFor","ngForOf"],[1,"calendar-cell",3,"ngClass"],[4,"ngIf"]],template:function(t,c){t&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return c.prevMonth()}),f(3,"ion-icon",3),r(),o(4,"span",4),m(5),r(),o(6,"button",5),h("click",function(){return c.nextMonth()}),f(7,"ion-icon",6),r()(),o(8,"div",7),m(9),r(),o(10,"div",8),g(11,fe,2,1,"div",9),r(),o(12,"div",10),g(13,ve,2,1,"div",11),r()()),t&2&&(a(5),y("",c.monthNames[c.month]," ",c.year,""),a(4),y(" Total Present: ",c.presentDays," / ",c.totalDaysInMonth," days "),a(2),s("ngForOf",x(6,ge)),a(2),s("ngForOf",c.weeks))},dependencies:[k,S,P,E,O],styles:[".calendar-grid[_ngcontent-%COMP%]{width:100%;max-width:350px;margin:0 auto 1.5rem;background:var(--ion-card-background);border-radius:16px;box-shadow:0 2px 8px rgba(var(--ion-color-primary-rgb),.08),0 1.5px 4px rgba(var(--ion-color-primary-rgb),.06);padding:1rem .5rem 1.5rem;color:var(--ion-card-color)}.calendar-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:500;color:var(--ion-text-color);letter-spacing:.01em;margin-bottom:.5rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.calendar-nav-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--ion-color-primary);font-size:1.5rem;cursor:pointer;padding:0 .5rem;border-radius:50%;transition:background .2s;height:32px;width:32px;display:flex;align-items:center;justify-content:center}.calendar-nav-btn[_ngcontent-%COMP%]:hover, .calendar-nav-btn[_ngcontent-%COMP%]:focus{background:var(--ion-color-primary-tint);outline:none}.calendar-header[_ngcontent-%COMP%], .calendar-row[_ngcontent-%COMP%]{display:flex}.calendar-cell[_ngcontent-%COMP%]{flex:1 1 0;height:40px;display:flex;align-items:center;justify-content:center;font-size:1em;background:var(--ion-card-background);color:var(--ion-card-color);margin:2px;border-radius:50%;transition:background .2s,color .2s,box-shadow .2s;position:relative}.calendar-header-cell[_ngcontent-%COMP%]{font-weight:600;background:var(--ion-segment-background);color:var(--ion-segment-color);border-radius:0;border-bottom:1px solid var(--ion-item-border-color);margin:0}.event-day[_ngcontent-%COMP%]{background:var(--ion-card-background);color:var(--ion-color-primary)}.event-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;line-height:32px;border-radius:50%;background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);font-weight:600;box-shadow:0 2px 6px rgba(var(--ion-color-primary-rgb),.08);margin:auto}.empty[_ngcontent-%COMP%]{background:transparent;border:none;box-shadow:none}.calendar-cell[_ngcontent-%COMP%]:not(.empty):hover{background:var(--ion-color-primary-tint);color:var(--ion-color-primary);cursor:pointer}.today[_ngcontent-%COMP%]{border:none;background:transparent;color:var(--ion-color-primary);font-weight:700}.today[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;line-height:32px;border-radius:50%;border:2px solid var(--ion-color-primary);background:var(--ion-color-light);color:var(--ion-color-primary);font-weight:700;box-sizing:border-box}.today.event-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--ion-color-primary-shade);border:2px solid var(--ion-color-light);color:var(--ion-color-primary-contrast)}.payment-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;line-height:32px;border-radius:50%;background:#2dd36f!important;color:#fff!important;font-weight:700;box-shadow:0 2px 6px #2dd36f1f;margin:auto;border:2px solid #2dd36f}.payment-day.today[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:2px solid #fff;background:#20ba5a!important}"]});let i=l;return i})();var _e=()=>({background:"#2dd36f",color:"#fff","border-radius":"8px",padding:"2px 10px","font-weight":"bold"}),ye=()=>({});function xe(i,l){if(i&1&&(o(0,"div"),f(1,"app-calendar-grid",19),r()),i&2){let e=p(2);a(),s("events",e.attendanceDates)("paymentEvents",e.paymentDates)}}function Ce(i,l){if(i&1&&(o(0,"div",27),m(1),r()),i&2){let e=p().$implicit;a(),b(e.notes)}}function we(i,l){if(i&1&&(o(0,"ion-item")(1,"ion-label")(2,"div",22),m(3),C(4,"number"),o(5,"span",23),m(6),r()(),o(7,"div",24),m(8),C(9,"date"),r(),g(10,Ce,2,1,"div",25),r(),o(11,"ion-note",26),m(12),r()()),i&2){let e=l.$implicit;a(3),u("\u20B9",w(4,7,e.amount,"1.0-0")," "),a(3),b(e.paymentType),a(2),b(w(9,10,e.date,"mediumDate")),a(2),s("ngIf",e.notes),a(),s("color",e.status==="Paid"?"success":"warning")("ngStyle",e.status==="Paid"?x(13,_e):x(14,ye)),a(),u(" ",e.status," ")}}function Ie(i,l){if(i&1&&(o(0,"ion-list"),g(1,we,13,15,"ion-item",21),r()),i&2){let e=p(3);a(),s("ngForOf",e.payments)}}function Me(i,l){i&1&&(o(0,"div",28)(1,"ion-note",29),m(2,"No payments found for this member."),r()())}function De(i,l){if(i&1&&(o(0,"div"),g(1,Ie,2,1,"ion-list",2)(2,Me,3,0,"div",20),r()),i&2){let e=p(2);a(),s("ngIf",e.payments.length>0),a(),s("ngIf",e.payments.length===0)}}function Se(i,l){if(i&1){let e=A();o(0,"ion-content")(1,"ion-card",3)(2,"ion-card-content",4)(3,"div",5)(4,"div",6)(5,"div",7),m(6),r(),o(7,"div",8)(8,"div",9)(9,"strong"),m(10),r(),o(11,"small",10),m(12),r()(),o(13,"div"),m(14),r(),o(15,"div"),m(16),r(),o(17,"div"),m(18),C(19,"date"),r(),o(20,"div"),m(21),C(22,"date"),r()()(),o(23,"div",11)(24,"ion-button",12),h("click",function(){I(e);let t=p();return M(t.openWhatsApp(t.member.phone))}),f(25,"ion-icon",13),r(),o(26,"ion-button",14),h("click",function(){I(e);let t=p();return M(t.callMember(t.member.phone))}),f(27,"ion-icon",15),r()()()()(),o(28,"ion-segment",16),h("ionChange",function(t){I(e);let c=p();return M(c.onTabChange(t))}),o(29,"ion-segment-button",17)(30,"ion-label"),m(31,"Attendance"),r()(),o(32,"ion-segment-button",18)(33,"ion-label"),m(34,"Payments"),r()()(),g(35,xe,2,2,"div",2)(36,De,3,2,"div",2),r()}if(i&2){let e=p();a(),s("ngClass",e.member.status?e.member.status.toLowerCase():""),a(4),F("background",e.getAvatarColor(e.member.firstName?e.member.firstName.charAt(0):"?")),a(),u(" ",e.member.firstName?e.member.firstName.charAt(0).toUpperCase():"?"," "),a(4),y("",e.member.firstName," ",e.member.lastName,""),a(2),u("ID: ",e.member.id,""),a(2),u("Phone: ",e.member.phone||"N/A",""),a(2),u("Status: ",e.member.status||"N/A",""),a(2),u("Joined: ",e.member.joinDate?w(19,15,e.member.joinDate,"mediumDate"):"N/A",""),a(3),u("Expiry: ",e.member.expiryDate?w(22,18,e.member.expiryDate,"mediumDate"):"N/A",""),a(5),F("color","#0A84FF"),a(9),s("ngIf",e.selectedTab==="attendance"),a(),s("ngIf",e.selectedTab==="payments")}}function Pe(i,l){i&1&&(o(0,"ion-content")(1,"ion-card")(2,"ion-card-content")(3,"div",30),m(4,"Member not found."),r()()()())}var se=(()=>{let l=class l{constructor(n,t,c,d){this.route=n,this.memberService=t,this.attendanceService=c,this.paymentService=d,this.member=null,this.currentMonth=new Date().getMonth(),this.currentYear=new Date().getFullYear(),this.attendanceDates=[],this.selectedTab="attendance",this.payments=[],this.paymentDates=[],T({callOutline:ne,logoWhatsapp:re})}ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&(this.memberService.getMembers().subscribe(t=>{this.member=t.members.find(c=>String(c.id)===String(n))||null}),this.attendanceService.getAttendanceByMember(n).subscribe(t=>{this.attendanceDates=t.map(c=>new Date(c.date).toISOString().slice(0,10))}),this.paymentSub=this.paymentService.getPaymentsByMember(n).subscribe(t=>{this.payments=t.sort((c,d)=>new Date(d.date).getTime()-new Date(c.date).getTime()),this.paymentDates=t.map(c=>new Date(c.date).toISOString().slice(0,10))}))}ngOnDestroy(){this.paymentSub&&this.paymentSub.unsubscribe()}onTabChange(n){this.selectedTab=n.detail.value}getAvatarColor(n){if(!n||!/^[A-Za-z]$/.test(n))return"#888";let t=n.toUpperCase().charCodeAt(0)-65;return t<0||t>25?"#888":`hsl(${t*(360/26)%360}, 50%, 60%)`}openWhatsApp(n){if(n){let t=`https://wa.me/${N(n)}`;window.open(t,"_blank")}}callMember(n){if(n){let t=`tel:${N(n)}`;window.open(t,"_blank")}}};l.\u0275fac=function(t){return new(t||l)(_(G),_(ae),_(le),_(ce))},l.\u0275cmp=D({type:l,selectors:[["app-member-detail"]],decls:8,vars:2,consts:[["color","primary"],["slot","start"],[4,"ngIf"],[1,"member-detail-card",3,"ngClass"],[1,"card-content"],[1,"member-info-row",2,"display","flex","align-items","center","justify-content","space-between"],[2,"display","flex","align-items","center","flex","1"],[1,"member-avatar",2,"width","48px","height","48px","border-radius","50%","color","#fff","display","flex","align-items","center","justify-content","center","font-size","1.5em","font-weight","bold","margin-right","16px"],[1,"member-info",2,"flex","1"],[1,"member-name"],[1,"member-id",2,"margin-left","8px"],[1,"member-actions",2,"display","flex","flex-direction","column","align-items","center","gap","8px"],["fill","clear","color","success",1,"action-button","whatsapp-btn",3,"click"],["name","logo-whatsapp"],["fill","clear",1,"action-button","call-btn",3,"click"],["name","call-outline"],["value","attendance",2,"margin","1.5rem 0 1rem 0",3,"ionChange"],["value","attendance"],["value","payments"],[3,"events","paymentEvents"],["class","ion-text-center ion-padding",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"font-weight","600"],[2,"font-size","0.9em","color","var(--ion-color-medium)"],[2,"font-size","0.95em","color","var(--ion-color-medium)"],["style","font-size:0.9em; color:var(--ion-color-tertiary);",4,"ngIf"],["slot","end",3,"color","ngStyle"],[2,"font-size","0.9em","color","var(--ion-color-tertiary)"],[1,"ion-text-center","ion-padding"],["color","medium"],[1,"ion-text-danger"]],template:function(t,c){t&1&&(o(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),f(3,"ion-back-button"),r(),o(4,"ion-title"),m(5,"Member Details"),r()()(),g(6,Se,37,21,"ion-content",2)(7,Pe,5,0,"ion-content",2)),t&2&&(a(6),s("ngIf",c.member),a(),s("ngIf",!c.member))},dependencies:[k,S,P,E,B,$,z,U,ee,J,Y,O,V,X,R,L,W,te,Q,Z,q,H,K,me],encapsulation:2});let i=l;return i})();var Re=[{path:"",component:se}];export{Re as MEMBER_DETAIL_ROUTES};
